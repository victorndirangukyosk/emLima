/*!
 * kwikbasket
 * KwikBasket Landing Page
 * 
 * @author KwikBasket
 * @version 1.0.0
 * Copyright 2020. MIT licensed.
 */
!function(e,t,a,s){"use strict";e(function(){e(a).scroll(function(){var t=e(".fixed-top");t.toggleClass("scrolled",e(this).scrollTop()>t.height())}),e(".nav-link, .navbar-brand").click(function(){var t=e(this).attr("href");e("html, body").animate({scrollTop:e(t).offset().top},700)}),ScrollOut(),gsap.to(".anim-from-top",{opacity:1,y:0,duration:.5,ease:"elastic"}),gsap.to(".anim-from-bottom",{y:0,duration:.5}),e(a).delegate("#login-button, #re_qrcode","click",function(t){t.preventDefault();const a=e("#login-button"),s=e("#login-email").val(),o=e("#login-password").val();s.length>0&&o.length>0&&(a.text("PLEASE WAIT"),a.toggleClass("disabled"),e.ajax({url:"index.php?path=account/login/beforeLogin",type:"post",data:{email:s,password:o},dataType:"json",success:function(t){console.log(t),1==t.status?null!=t.two_factor&&(e("#creds").hide(),e("#qrcode").show(),e("#qrcode_img").empty(),e("#qrcode_img").append("<img width='100' height='100' src='"+t.two_factor.qr_code+"'/>"),console.log(t.two_factor.qr_code),a.text("LOGIN")):(iziToast.error({position:"topRight",message:t.error_warning}),a.text("LOGIN"),a.toggleClass("disabled"))}}))}),e(a).delegate("#qr-login-button","click",function(a){a.preventDefault();const s=e("#login-button"),o=e("#login-email").val(),i=e("#login-password").val(),r=e("#secret_code").val(),n=e("#one_time_code").val();o.length>0&&i.length>0&&r.length>0&&n.length>0?(s.text("PLEASE WAIT"),s.toggleClass("disabled"),e.ajax({url:"index.php?path=account/login/login",type:"post",data:{email:o,password:i,secret_code:r,one_time_code:n},dataType:"json",success:function(a){a.status?null!=a.redirect?t.location.href=a.redirect:"1"==a.temppassword?(location=e(".base_url").attr("href")+"/changepass",console.log(e(".base_url"))):location=e(".base_url").attr("href"):(iziToast.error({position:"topRight",message:a.error_warning}),s.text("LOGIN"),s.toggleClass("disabled"))}})):iziToast.warning({position:"topRight",message:"Please enter your secret code and one time code"})}),e("#register-phone").keyup(function(e){/\D/g.test(this.value)&&(this.value=this.value.replace(/\D/g,""))}),e(a).delegate("#register-button","click",function(t){t.preventDefault();const a=e("#register-first-name").val(),s=e("#register-last-name").val(),o=e("#register-email").val(),i=e("#register-phone").val(),r=e("#register-company-name").val(),n=e("#register-company-address").val(),l=e("#register-business-type").val(),c=e("#register-building-name").val(),g=e("#register-address-line").val(),p=e("#register-location").val(),d=e("#register-password").val(),m=e("#register-password-confirm").val(),u=e("#registration-view"),h=e("#otp-view"),f=e("#register-button"),v=e("#register-form")[0],w=v.reportValidity();w&&(m!==d?iziToast.warning({position:"topRight",message:"Passwords do no match"}):""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(f.text("PLEASE WAIT"),f.toggleClass("disabled"),e.ajax({url:"index.php?path=account/register/register_send_otp",type:"POST",dataType:"json",data:{firstname:a,lastname:s,email:o,telephone:i,company_name:r,company_address:n,customer_group_id:l,house_building:c,address:g,location:p,password:d,confirm:m},success:function(e){f.text("SIGN UP"),f.toggleClass("disabled"),e.status?(iziToast.success({position:"topRight",message:e.success_message}),u.hide(),h.show()):iziToast.warning({position:"topRight",title:"Oops",message:e.error_warning})}})))}),e(a).delegate("#otp-verify-button","click",function(a){a.preventDefault();const s=e("#register-first-name").val(),o=e("#register-last-name").val(),i=e("#register-email").val(),r=e("#register-phone").val(),n=e("#register-company-name").val(),l=e("#register-company-address").val(),c=e("#register-business-type").val(),g=e("#register-building-name").val(),p=e("#register-address-line").val(),d=e("#register-location").val(),m=e("#register-password").val(),u=e("#register-password-confirm").val(),h=e("#otp-value").val(),f=e("#otp-verify-button");h.length>3?(f.text("PLEASE WAIT"),f.toggleClass("disabled"),e.ajax({url:"index.php?path=account/register/register_verify_otp",type:"POST",dataType:"json",data:{firstname:s,lastname:o,email:i,telephone:r,company_name:n,company_address:l,customer_group_id:c,house_building:g,address:p,location:d,password:m,confirm:u,signup_otp:h},success:function(a){f.text("VERIFY"),f.toggleClass("disabled"),e("#otp-value").val(""),a.status?(iziToast.success({timeout:!1,position:"topRight",message:a.success_message}),setTimeout(function(){t.location=e(".base_url").attr("href")},3e3)):iziToast.warning({position:"topRight",message:"We couldn't verify your account. Please check the OTP"})}})):iziToast.error({position:"topRight",message:"Please enter a valid OTP"})}),e(a).delegate("#careers-submit-button","click",function(t){t.preventDefault();const a=e("#careers-first-name").val(),s=e("#careers-last-name").val(),o=e("#careers-designation").val(),i=e("#careers-about-yourself").val(),r=e("#careers-form")[0],n=r.reportValidity(),l=e("#careers-submit-button");n&&(""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(l.text("PLEASE WAIT"),l.toggleClass("disabled"),e.ajax({url:"index.php?path=common/home/savecareers",type:"POST",dataType:"json",data:{firstname:a,lastname:s,role:o,yourself:i},success:function(t){l.toggleClass("disabled"),t.status?(iziToast.success({position:"topRight",message:t.success_message}),e("#careers-form")[0].reset()):iziToast.warning({position:"topRight",title:"Oops",message:t.error_warning})}})))}),e(a).delegate("#partner-registration-button","click",function(t){t.preventDefault();const a=e("#partner-first-name").val(),s=e("#partner-last-name").val(),o=e("#partner-designation").val(),i=e("#partner-company-name").val(),r=e("#partner-email").val(),n=e("#partner-phone").val(),l=e("#partner-description").val(),c=e("#partner-registration-form")[0],g=c.reportValidity(),p=e("#partner-registration-button");g&&(""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(p.text("PLEASE WAIT"),p.toggleClass("disabled"),e.ajax({url:"index.php?path=common/home/savepartner",type:"POST",dataType:"json",data:{firstname:a,lastname:s,designation:o,company:i,email:r,phone:n,description:l},success:function(t){p.toggleClass("disabled"),t.status?(iziToast.success({position:"topRight",message:t.success_message}),e("#partner-registration-form")[0].reset()):iziToast.warning({position:"topRight",title:"Oops",message:t.error_warning})}})))}),e("#forgot-password-btn").click(function(t){t.preventDefault(),e("#login-view").hide(),e("#forgot-password-view").show()}),e("#password-reset-button").click(function(t){t.preventDefault();const a=e("#reset-password-email").val(),s=e("#password-reset-button");0==a.length?iziToast.warning({position:"topRight",message:"Please enter your account email"}):(s.text("PLEASE WAIT"),s.toggleClass("disabled"),e.ajax({url:"index.php?path=account/forgotten",type:"POST",dataType:"json",data:{email:a},success:function(t){s.text("RESET PASSWORD"),s.toggleClass("disabled"),e("#reset-password-email").val(""),t.status?iziToast.success({timeout:!1,position:"topRight",message:t.text_message}):iziToast.warning({position:"topRight",message:"We couldn't find an account with that email address"})}}))}),e("#farmer-register-button").click(function(t){t.preventDefault();e("#farmer-first-name").val(),e("#farmer-last-name").val(),e("#farmer-email").val(),e("#farmer-phone").val(),e("#farmer-type").val(),e("#farmer-location").val(),e("farmer-produce-grown").val(),e("#farmer-register-button");""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):e("#farmer-registration-form")[0].reportValidity()&&(iziToast.success({position:"topRight",message:"Thanks for registering. We'll get in touch"}),e("#farmer-registration-form")[0].reset())})})}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwic2Nyb2xsIiwiJG5hdiIsInRvZ2dsZUNsYXNzIiwidGhpcyIsInNjcm9sbFRvcCIsImhlaWdodCIsImNsaWNrIiwic2VjdGlvblRvIiwiYXR0ciIsImFuaW1hdGUiLCJvZmZzZXQiLCJ0b3AiLCJTY3JvbGxPdXQiLCJnc2FwIiwidG8iLCJvcGFjaXR5IiwieSIsImR1cmF0aW9uIiwiZWFzZSIsImRlbGVnYXRlIiwiZSIsInByZXZlbnREZWZhdWx0IiwibG9naW5CdXR0b24iLCJlbWFpbCIsInZhbCIsInBhc3N3b3JkIiwibGVuZ3RoIiwidGV4dCIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwiZGF0YSIsImRhdGFUeXBlIiwic3VjY2VzcyIsImpzb24iLCJjb25zb2xlIiwibG9nIiwiaGlkZSIsInNob3ciLCJlbXB0eSIsImFwcGVuZCIsIml6aVRvYXN0IiwiZXJyb3IiLCJwb3NpdGlvbiIsIm1lc3NhZ2UiLCJzZWNyZXRfY29kZSIsIm9uZV90aW1lX2NvZGUiLCJsb2NhdGlvbiIsImhyZWYiLCJ3YXJuaW5nIiwia2V5dXAiLCJ0ZXN0IiwidmFsdWUiLCJyZXBsYWNlIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJwaG9uZSIsImNvbXBhbnlOYW1lIiwiY29tcGFueUFkZHJlc3MiLCJidXNpbmVzc1R5cGUiLCJidWlsZGluZ05hbWUiLCJhZGRyZXNzTGluZSIsInBhc3N3b3JkQ29uZmlybWF0aW9uIiwicmVnaXN0cmF0aW9uVmlldyIsIm90cFZpZXciLCJyZWdpc3RlckJ1dHRvbiIsInJlZ2lzdGVyRm9ybSIsImZvcm1Jc1ZhbGlkIiwicmVwb3J0VmFsaWRpdHkiLCJncmVjYXB0Y2hhIiwiZ2V0UmVzcG9uc2UiLCJmaXJzdG5hbWUiLCJsYXN0bmFtZSIsInRlbGVwaG9uZSIsImNvbXBhbnlfbmFtZSIsImNvbXBhbnlfYWRkcmVzcyIsImN1c3RvbWVyX2dyb3VwX2lkIiwiaG91c2VfYnVpbGRpbmciLCJhZGRyZXNzIiwiY29uZmlybSIsInRpdGxlIiwib3RwIiwidmVyaWZ5QnV0dG9uIiwic2lnbnVwX290cCIsInRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwicm9sZSIsInlvdXJzZWxmIiwicmVzZXQiLCJkZXNpZ25hdGlvbiIsImNvbXBhbnkiLCJkZXNjcmlwdGlvbiIsInJlc2V0QnV0dG9uIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7OztDQUFBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBRUEsWUFFQUgsR0FBQSxXQUVBQSxFQUFBRSxHQUFBRSxPQUFBLFdBQ0EsR0FBQUMsR0FBQUwsRUFBQSxhQUNBSyxHQUFBQyxZQUFBLFdBQUFOLEVBQUFPLE1BQUFDLFlBQUFILEVBQUFJLFlBSUFULEVBQUEsNEJBQUFVLE1BQUEsV0FDQSxHQUFBQyxHQUFBWCxFQUFBTyxNQUFBSyxLQUFBLE9BQ0FaLEdBQUEsY0FBQWEsU0FDQUwsVUFBQVIsRUFBQVcsR0FBQUcsU0FBQUMsS0FDQSxPQUlBQyxZQUdBQyxLQUFBQyxHQUFBLGtCQUNBQyxRQUFBLEVBQ0FDLEVBQUEsRUFDQUMsU0FBQSxHQUNBQyxLQUFBLFlBR0FMLEtBQUFDLEdBQUEscUJBQ0FFLEVBQUEsRUFDQUMsU0FBQSxLQUlBckIsRUFBQUUsR0FBQXFCLFNBQUEsNEJBQUEsUUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxnQkFFQSxNQUFBQyxHQUFBMUIsRUFBQSxpQkFDQTJCLEVBQUEzQixFQUFBLGdCQUFBNEIsTUFDQUMsRUFBQTdCLEVBQUEsbUJBQUE0QixLQUNBRCxHQUFBRyxPQUFBLEdBQUFELEVBQUFDLE9BQUEsSUFDQUosRUFBQUssS0FBQSxlQUNBTCxFQUFBcEIsWUFBQSxZQUNBTixFQUFBZ0MsTUFDQUMsSUFBQSwyQ0FDQUMsS0FBQSxPQUNBQyxNQUFBUixNQUFBQSxFQUFBRSxTQUFBQSxHQUNBTyxTQUFBLE9BQ0FDLFFBQUEsU0FBQUMsR0FDQUMsUUFBQUMsSUFBQUYsR0FDQSxHQUFBQSxFQUFBLE9B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LEdBQ0FBLEVBQUFDLGdCQUVBLE1BQUFFLEdBQUEzQixFQUFBLHlCQUFBNEIsTUFDQW9FLEVBQUFoRyxFQUFBLHlCQUNBLElBQUEyQixFQUFBRyxPQUNBZSxTQUFBUSxTQUNBTixTQUFBLFdBQ0FDLFFBQUEscUNBR0FnRCxFQUFBakUsS0FBQSxlQUNBaUUsRUFBQTFGLFlBQUEsWUFFQU4sRUFBQWdDLE1BQ0FDLElBQUEsbUNBQ0FDLEtBQUEsT0FDQUUsU0FBQSxPQUNBRCxNQUNBUixNQUFBQSxHQUVBVSxRQUFBLFNBQUFDLEdBQ0EwRCxFQUFBakUsS0FBQSxrQkFDQWlFLEVBQUExRixZQUFBLFlBQ0FOLEVBQUEseUJBQUE0QixJQUFBLElBRUFVLEVBQUEsT0FDQU8sU0FBQVIsU0FDQW1ELFNBQUEsRUFDQXpDLFNBQUEsV0FDQUMsUUFBQVYsRUFBQSxlQUdBTyxTQUFBUSxTQUNBTixTQUFBLFdBQ0FDLFFBQUEsOERBUUFoRCxFQUFBLDJCQUFBVSxNQUFBLFNBQUFjLEdBQ0FBLEVBQUFDLGdCQUVBekIsR0FBQSxzQkFBQTRCLE1BQ0E1QixFQUFBLHFCQUFBNEIsTUFDQTVCLEVBQUEsaUJBQUE0QixNQUNBNUIsRUFBQSxpQkFBQTRCLE1BQ0E1QixFQUFBLGdCQUFBNEIsTUFDQTVCLEVBQUEsb0JBQUE0QixNQUNBNUIsRUFBQSx3QkFBQTRCLE1BQ0E1QixFQUFBLDBCQUNBLEtBQUF5RSxXQUFBQyxjQUNBN0IsU0FBQVEsU0FDQU4sU0FBQSxXQUNBQyxRQUFBLDRCQUdBaEQsRUFBQSw2QkFBQSxHQUFBd0UsbUJBQ0EzQixTQUFBUixTQUNBVSxTQUFBLFdBQ0FDLFFBQUEsK0NBR0FoRCxFQUFBLDZCQUFBLEdBQUE0RixjQXVDQUssT0FBQWhHLE9BQUFDIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgJChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gQ2hhbmdlIG5hdmJhciBzdHlsZSBvbiBzY3JvbGxcclxuICAgICAgICAkKGRvY3VtZW50KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJG5hdiA9ICQoJy5maXhlZC10b3AnKTtcclxuICAgICAgICAgICAgJG5hdi50b2dnbGVDbGFzcygnc2Nyb2xsZWQnLCAkKHRoaXMpLnNjcm9sbFRvcCgpID4gJG5hdi5oZWlnaHQoKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIE5hdiBsaW5rcyBzY3JvbGwgYW5pbWF0aW9uXHJcbiAgICAgICAgJCgnLm5hdi1saW5rLCAubmF2YmFyLWJyYW5kJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc2VjdGlvblRvID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogJChzZWN0aW9uVG8pLm9mZnNldCgpLnRvcFxyXG4gICAgICAgICAgICB9LCA3MDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBMYW5kaW5nIHBhZ2Ugc2Nyb2xsIGFuaW1hdGlvbnNcclxuICAgICAgICBTY3JvbGxPdXQoKTtcclxuXHJcbiAgICAgICAgLy8gSGVybyBzZWN0aW9uIGFuaW1hdGlvblxyXG4gICAgICAgIGdzYXAudG8oJy5hbmltLWZyb20tdG9wJywge1xyXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICAgICAgICB5OiAwLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogLjUsXHJcbiAgICAgICAgICAgIGVhc2U6ICdlbGFzdGljJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBnc2FwLnRvKCcuYW5pbS1mcm9tLWJvdHRvbScsIHtcclxuICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgZHVyYXRpb246IC41XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEN1c3RvbWVyIExvZ2luXHJcbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUoJyNsb2dpbi1idXR0b24sICNyZV9xcmNvZGUnLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsb2dpbkJ1dHRvbiA9ICQoJyNsb2dpbi1idXR0b24nKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWFpbCA9ICQoJyNsb2dpbi1lbWFpbCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhc3N3b3JkID0gJCgnI2xvZ2luLXBhc3N3b3JkJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVtYWlsLmxlbmd0aCA+IDAgJiYgcGFzc3dvcmQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbG9naW5CdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcclxuICAgICAgICAgICAgICAgIGxvZ2luQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICdpbmRleC5waHA/cGF0aD1hY2NvdW50L2xvZ2luL2JlZm9yZUxvZ2luJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncG9zdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge2VtYWlsOiBlbWFpbCwgcGFzc3dvcmQ6IHBhc3N3b3JkfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGpzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvblsnc3RhdHVzJ10gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3R3b19mYWN0b3InXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNjcmVkc1wiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNxcmNvZGVcIikuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcXJjb2RlX2ltZ1wiKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcXJjb2RlX2ltZ1wiKS5hcHBlbmQoXCI8aW1nIHdpZHRoPScxMDAnIGhlaWdodD0nMTAwJyBzcmM9J1wiICsganNvblsndHdvX2ZhY3RvciddWydxcl9jb2RlJ10gKyBcIicvPlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhqc29uWyd0d29fZmFjdG9yJ11bJ3FyX2NvZGUnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naW5CdXR0b24udGV4dCgnTE9HSU4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0LmVycm9yKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydlcnJvcl93YXJuaW5nJ11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naW5CdXR0b24udGV4dCgnTE9HSU4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2luQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQ3VzdG9tZXIgTG9naW5cclxuICAgICAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZSgnI3FyLWxvZ2luLWJ1dHRvbicsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxvZ2luQnV0dG9uID0gJCgnI2xvZ2luLWJ1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gJCgnI2xvZ2luLWVtYWlsJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSAkKCcjbG9naW4tcGFzc3dvcmQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNyZXRfY29kZSA9ICQoJyNzZWNyZXRfY29kZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9uZV90aW1lX2NvZGUgPSAkKCcjb25lX3RpbWVfY29kZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbWFpbC5sZW5ndGggPiAwICYmIHBhc3N3b3JkLmxlbmd0aCA+IDAgJiYgc2VjcmV0X2NvZGUubGVuZ3RoID4gMCAmJiBvbmVfdGltZV9jb2RlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGxvZ2luQnV0dG9uLnRleHQoJ1BMRUFTRSBXQUlUJyk7XHJcbiAgICAgICAgICAgICAgICBsb2dpbkJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnaW5kZXgucGhwP3BhdGg9YWNjb3VudC9sb2dpbi9sb2dpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bvc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtlbWFpbDogZW1haWwsIHBhc3N3b3JkOiBwYXNzd29yZCwgc2VjcmV0X2NvZGU6IHNlY3JldF9jb2RlLCBvbmVfdGltZV9jb2RlOiBvbmVfdGltZV9jb2RlfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uWydzdGF0dXMnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3JlZGlyZWN0J10gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0ganNvblsncmVkaXJlY3QnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoanNvblsndGVtcHBhc3N3b3JkJ10gPT0gJzEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSAkKCcuYmFzZV91cmwnKS5hdHRyKCdocmVmJykgKyAnL2NoYW5nZXBhc3MnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoJy5iYXNlX3VybCcpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSAkKCcuYmFzZV91cmwnKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC5lcnJvcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsnZXJyb3Jfd2FybmluZyddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2luQnV0dG9uLnRleHQoJ0xPR0lOJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dpbkJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBlbnRlciB5b3VyIHNlY3JldCBjb2RlIGFuZCBvbmUgdGltZSBjb2RlJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQ3VzdG9tZXIgUmVnaXN0cmF0aW9uXHJcblxyXG4gICAgICAgICQoJyNyZWdpc3Rlci1waG9uZScpLmtleXVwKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmICgvXFxEL2cudGVzdCh0aGlzLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBub24tZGlnaXRzIGZyb20gaW5wdXQgdmFsdWVcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnJlcGxhY2UoL1xcRC9nLCAnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUoJyNyZWdpc3Rlci1idXR0b24nLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBmaXJzdE5hbWUgPSAkKCcjcmVnaXN0ZXItZmlyc3QtbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3ROYW1lID0gJCgnI3JlZ2lzdGVyLWxhc3QtbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gJCgnI3JlZ2lzdGVyLWVtYWlsJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhvbmUgPSAkKCcjcmVnaXN0ZXItcGhvbmUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wYW55TmFtZSA9ICQoJyNyZWdpc3Rlci1jb21wYW55LW5hbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wYW55QWRkcmVzcyA9ICQoJyNyZWdpc3Rlci1jb21wYW55LWFkZHJlc3MnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXNpbmVzc1R5cGUgPSAkKCcjcmVnaXN0ZXItYnVzaW5lc3MtdHlwZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nTmFtZSA9ICQoJyNyZWdpc3Rlci1idWlsZGluZy1uYW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkcmVzc0xpbmUgPSAkKCcjcmVnaXN0ZXItYWRkcmVzcy1saW5lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSAkKCcjcmVnaXN0ZXItbG9jYXRpb24nKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXNzd29yZCA9ICQoJyNyZWdpc3Rlci1wYXNzd29yZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhc3N3b3JkQ29uZmlybWF0aW9uID0gJCgnI3JlZ2lzdGVyLXBhc3N3b3JkLWNvbmZpcm0nKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RyYXRpb25WaWV3ID0gJCgnI3JlZ2lzdHJhdGlvbi12aWV3Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3RwVmlldyA9ICQoJyNvdHAtdmlldycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdGVyQnV0dG9uID0gJCgnI3JlZ2lzdGVyLWJ1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdGVyRm9ybSA9ICQoJyNyZWdpc3Rlci1mb3JtJylbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybUlzVmFsaWQgPSByZWdpc3RlckZvcm0ucmVwb3J0VmFsaWRpdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybUlzVmFsaWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXNzd29yZENvbmZpcm1hdGlvbiAhPT0gcGFzc3dvcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQYXNzd29yZHMgZG8gbm8gbWF0Y2gnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChncmVjYXB0Y2hhLmdldFJlc3BvbnNlKCkgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgY29tcGxldGUgY2FwdGNoYSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaW5kZXgucGhwP3BhdGg9YWNjb3VudC9yZWdpc3Rlci9yZWdpc3Rlcl9zZW5kX290cCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RuYW1lOiBsYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVsZXBob25lOiBwaG9uZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IGNvbXBhbnlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhbnlfYWRkcmVzczogY29tcGFueUFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJfZ3JvdXBfaWQ6IGJ1c2luZXNzVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VzZV9idWlsZGluZzogYnVpbGRpbmdOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGFkZHJlc3NMaW5lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybTogcGFzc3dvcmRDb25maXJtYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRleHQoJ1NJR04gVVAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3N0YXR1cyddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0LnN1Y2Nlc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydzdWNjZXNzX21lc3NhZ2UnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblZpZXcuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdHBWaWV3LnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ2Vycm9yX3dhcm5pbmcnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBPVFAgVmVyaWZpY2F0aW9uXHJcbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUoJyNvdHAtdmVyaWZ5LWJ1dHRvbicsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0TmFtZSA9ICQoJyNyZWdpc3Rlci1maXJzdC1uYW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdE5hbWUgPSAkKCcjcmVnaXN0ZXItbGFzdC1uYW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1haWwgPSAkKCcjcmVnaXN0ZXItZW1haWwnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG9uZSA9ICQoJyNyZWdpc3Rlci1waG9uZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBhbnlOYW1lID0gJCgnI3JlZ2lzdGVyLWNvbXBhbnktbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBhbnlBZGRyZXNzID0gJCgnI3JlZ2lzdGVyLWNvbXBhbnktYWRkcmVzcycpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1c2luZXNzVHlwZSA9ICQoJyNyZWdpc3Rlci1idXNpbmVzcy10eXBlJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnVpbGRpbmdOYW1lID0gJCgnI3JlZ2lzdGVyLWJ1aWxkaW5nLW5hbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRyZXNzTGluZSA9ICQoJyNyZWdpc3Rlci1hZGRyZXNzLWxpbmUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9ICQoJyNyZWdpc3Rlci1sb2NhdGlvbicpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhc3N3b3JkID0gJCgnI3JlZ2lzdGVyLXBhc3N3b3JkJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmRDb25maXJtYXRpb24gPSAkKCcjcmVnaXN0ZXItcGFzc3dvcmQtY29uZmlybScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG90cCA9ICQoJyNvdHAtdmFsdWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZXJpZnlCdXR0b24gPSAkKCcjb3RwLXZlcmlmeS1idXR0b24nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3RwLmxlbmd0aCA+IDMpIHtcclxuICAgICAgICAgICAgICAgIHZlcmlmeUJ1dHRvbi50ZXh0KCdQTEVBU0UgV0FJVCcpO1xyXG4gICAgICAgICAgICAgICAgdmVyaWZ5QnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnaW5kZXgucGhwP3BhdGg9YWNjb3VudC9yZWdpc3Rlci9yZWdpc3Rlcl92ZXJpZnlfb3RwJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0bmFtZTogbGFzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVsZXBob25lOiBwaG9uZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiBjb21wYW55TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFueV9hZGRyZXNzOiBjb21wYW55QWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJfZ3JvdXBfaWQ6IGJ1c2luZXNzVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG91c2VfYnVpbGRpbmc6IGJ1aWxkaW5nTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogYWRkcmVzc0xpbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtOiBwYXNzd29yZENvbmZpcm1hdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbnVwX290cDogb3RwXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlCdXR0b24udGV4dCgnVkVSSUZZJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeUJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI290cC12YWx1ZScpLnZhbCgnJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvblsnc3RhdHVzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0LnN1Y2Nlc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ3N1Y2Nlc3NfbWVzc2FnZSddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAkKCcuYmFzZV91cmwnKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1dlIGNvdWxkblxcJ3QgdmVyaWZ5IHlvdXIgYWNjb3VudC4gUGxlYXNlIGNoZWNrIHRoZSBPVFAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXppVG9hc3QuZXJyb3Ioe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBPVFAnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZSgnI2NhcmVlcnMtc3VibWl0LWJ1dHRvbicsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdE5hbWUgPSAkKCcjY2FyZWVycy1maXJzdC1uYW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdE5hbWUgPSAkKCcjY2FyZWVycy1sYXN0LW5hbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByb2xlID0gJCgnI2NhcmVlcnMtZGVzaWduYXRpb24nKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB5b3Vyc2VsZiA9ICQoJyNjYXJlZXJzLWFib3V0LXlvdXJzZWxmJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0ZXJGb3JtID0gJCgnI2NhcmVlcnMtZm9ybScpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1Jc1ZhbGlkID0gcmVnaXN0ZXJGb3JtLnJlcG9ydFZhbGlkaXR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0ZXJCdXR0b24gPSAkKCcjY2FyZWVycy1zdWJtaXQtYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1Jc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JlY2FwdGNoYS5nZXRSZXNwb25zZSgpID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGNvbXBsZXRlIGNhcHRjaGEnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRleHQoJ1BMRUFTRSBXQUlUJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaW5kZXgucGhwP3BhdGg9Y29tbW9uL2hvbWUvc2F2ZWNhcmVlcnMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdG5hbWU6IGxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogcm9sZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlvdXJzZWxmOiB5b3Vyc2VsZlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvblsnc3RhdHVzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ3N1Y2Nlc3NfbWVzc2FnZSddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2NhcmVlcnMtZm9ybScpWzBdLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsnZXJyb3Jfd2FybmluZyddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZSgnI3BhcnRuZXItcmVnaXN0cmF0aW9uLWJ1dHRvbicsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdE5hbWUgPSAkKCcjcGFydG5lci1maXJzdC1uYW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdE5hbWUgPSAkKCcjcGFydG5lci1sYXN0LW5hbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXNpZ25hdGlvbiA9ICQoJyNwYXJ0bmVyLWRlc2lnbmF0aW9uJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGFueSA9ICQoJyNwYXJ0bmVyLWNvbXBhbnktbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gJCgnI3BhcnRuZXItZW1haWwnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG9uZSA9ICQoJyNwYXJ0bmVyLXBob25lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSAkKCcjcGFydG5lci1kZXNjcmlwdGlvbicpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdGVyRm9ybSA9ICQoJyNwYXJ0bmVyLXJlZ2lzdHJhdGlvbi1mb3JtJylbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybUlzVmFsaWQgPSByZWdpc3RlckZvcm0ucmVwb3J0VmFsaWRpdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RlckJ1dHRvbiA9ICQoJyNwYXJ0bmVyLXJlZ2lzdHJhdGlvbi1idXR0b24nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybUlzVmFsaWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChncmVjYXB0Y2hhLmdldFJlc3BvbnNlKCkgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgY29tcGxldGUgY2FwdGNoYSdcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcclxuICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdpbmRleC5waHA/cGF0aD1jb21tb24vaG9tZS9zYXZlcGFydG5lcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RuYW1lOiBmaXJzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0bmFtZTogbGFzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNpZ25hdGlvbjogZGVzaWduYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYW55OiBjb21wYW55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHBob25lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uWydzdGF0dXMnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0LnN1Y2Nlc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsnc3VjY2Vzc19tZXNzYWdlJ11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjcGFydG5lci1yZWdpc3RyYXRpb24tZm9ybScpWzBdLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsnZXJyb3Jfd2FybmluZyddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcjZm9yZ290LXBhc3N3b3JkLWJ0bicpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICQoJyNsb2dpbi12aWV3JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcjZm9yZ290LXBhc3N3b3JkLXZpZXcnKS5zaG93KCk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcjcGFzc3dvcmQtcmVzZXQtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZW1haWwgPSAkKCcjcmVzZXQtcGFzc3dvcmQtZW1haWwnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNldEJ1dHRvbiA9ICQoJyNwYXNzd29yZC1yZXNldC1idXR0b24nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZW1haWwubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgZW50ZXIgeW91ciBhY2NvdW50IGVtYWlsJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXNldEJ1dHRvbi50ZXh0KCdQTEVBU0UgV0FJVCcpO1xyXG4gICAgICAgICAgICAgICAgcmVzZXRCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICdpbmRleC5waHA/cGF0aD1hY2NvdW50L2ZvcmdvdHRlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0QnV0dG9uLnRleHQoJ1JFU0VUIFBBU1NXT1JEJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0QnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjcmVzZXQtcGFzc3dvcmQtZW1haWwnKS52YWwoJycpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3N0YXR1cyddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWyd0ZXh0X21lc3NhZ2UnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnV2UgY291bGRuXFwndCBmaW5kIGFuIGFjY291bnQgd2l0aCB0aGF0IGVtYWlsIGFkZHJlc3MnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJyNmYXJtZXItcmVnaXN0ZXItYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZmlyc3ROYW1lID0gJCgnI2Zhcm1lci1maXJzdC1uYW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdE5hbWUgPSAkKCcjZmFybWVyLWxhc3QtbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gJCgnI2Zhcm1lci1lbWFpbCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBob25lID0gJCgnI2Zhcm1lci1waG9uZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhcm1lclR5cGUgPSAkKCcjZmFybWVyLXR5cGUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmYXJtTG9jYXRpb24gPSAkKCcjZmFybWVyLWxvY2F0aW9uJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZHVjZURlc2NyaXB0aW9uID0gJCgnZmFybWVyLXByb2R1Y2UtZ3Jvd24nKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RlckJ1dHRvbiA9ICQoJyNmYXJtZXItcmVnaXN0ZXItYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdyZWNhcHRjaGEuZ2V0UmVzcG9uc2UoKSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBjb21wbGV0ZSBjYXB0Y2hhJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnI2Zhcm1lci1yZWdpc3RyYXRpb24tZm9ybScpWzBdLnJlcG9ydFZhbGlkaXR5KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGFua3MgZm9yIHJlZ2lzdGVyaW5nLiBXZVxcJ2xsIGdldCBpbiB0b3VjaCdcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI2Zhcm1lci1yZWdpc3RyYXRpb24tZm9ybScpWzBdLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXJCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgIHVybDogJ2luZGV4LnBocD9wYXRoPWFjY291bnQvZmFybWVycmVnaXN0ZXIvcmVnaXN0ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAvLyAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIG5hbWU6IGZpcnN0TmFtZSArICcgJyArIGxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBlbWFpbDogZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRlbGVwaG9uZTogcGhvbmVcclxuICAgICAgICAgICAgICAgICAgICAvLyAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICByZWdpc3RlckJ1dHRvbi50ZXh0KCdSRUdJU1RFUicpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmIChqc29uWydzdGF0dXMnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgIGl6aVRvYXN0LnN1Y2Nlc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBtZXNzYWdlOiBqc29uWydzdWNjZXNzX21lc3NhZ2UnXVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAkKCcjZmFybWVyLXJlZ2lzdHJhdGlvbi1mb3JtJylbMF0ucmVzZXQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgaXppVG9hc3Qud2FybmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHRpdGxlOiAnT29wcycsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBtZXNzYWdlOiAnV2UgY291bGRuXFwndCByZWdpc3RlciB5b3UuIFBsZWFzZSB0cnkgYWdhaW4nXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG59KShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG4iXX0=
