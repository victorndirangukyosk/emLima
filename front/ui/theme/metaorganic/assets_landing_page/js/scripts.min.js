/*!
 * kwikbasket
 * KwikBasket Landing Page
 * 
 * @author KwikBasket
 * @version 1.0.0
 * Copyright 2020. MIT licensed.
 */
!function(e,t,a,s){"use strict";e(function(){e(a).scroll(function(){var t=e(".fixed-top");t.toggleClass("scrolled",e(this).scrollTop()>t.height())}),e(".nav-link, .navbar-brand").click(function(){var t=e(this).attr("href");e("html, body").animate({scrollTop:e(t).offset().top},700)}),ScrollOut(),gsap.to(".anim-from-top",{opacity:1,y:0,duration:.5,ease:"elastic"}),gsap.to(".anim-from-bottom",{y:0,duration:.5}),e(a).delegate("#login-button","click",function(t){t.preventDefault();const a=e("#login-button"),s=e("#login-email").val(),o=e("#login-password").val();s.length>0&&o.length>0&&(a.text("PLEASE WAIT"),a.toggleClass("disabled"),e.ajax({url:"index.php?path=account/login/beforeLogin",type:"post",data:{email:s,password:o},dataType:"json",success:function(t){console.log(t),1==t.status?null!=t.two_factor&&(e("#creds").hide(),e("#qrcode").show(),e("#qrcode_img").append("<img src='"+t.two_factor.qr_code+"'/>"),console.log(t.two_factor.qr_code),a.text("LOGIN")):(iziToast.error({position:"topRight",message:t.error_warning}),a.text("LOGIN"),a.toggleClass("disabled"))}}))}),e(a).delegate("#qr-login-button","click",function(a){a.preventDefault();const s=e("#login-button"),o=e("#login-email").val(),i=e("#login-password").val(),r=e("#secret_code").val(),n=e("#one_time_code").val();o.length>0&&i.length>0&&r.length>0&&n.length>0?(s.text("PLEASE WAIT"),s.toggleClass("disabled"),e.ajax({url:"index.php?path=account/login/login",type:"post",data:{email:o,password:i,secret_code:r,one_time_code:n},dataType:"json",success:function(a){a.status?null!=a.redirect?t.location.href=a.redirect:"1"==a.temppassword?(location=e(".base_url").attr("href")+"/changepass",console.log(e(".base_url"))):location=e(".base_url").attr("href"):(iziToast.error({position:"topRight",message:a.error_warning}),s.text("LOGIN"),s.toggleClass("disabled"))}})):iziToast.warning({position:"topRight",message:"Please enter your email and password"})}),e("#register-phone").keyup(function(e){/\D/g.test(this.value)&&(this.value=this.value.replace(/\D/g,""))}),e(a).delegate("#register-button","click",function(t){t.preventDefault();const a=e("#register-first-name").val(),s=e("#register-last-name").val(),o=e("#register-email").val(),i=e("#register-phone").val(),r=e("#register-company-name").val(),n=e("#register-company-address").val(),l=e("#register-business-type").val(),g=e("#register-building-name").val(),c=e("#register-address-line").val(),p=e("#register-location").val(),d=e("#register-password").val(),u=e("#register-password-confirm").val(),m=e("#registration-view"),h=e("#otp-view"),f=e("#register-button"),v=e("#register-form")[0],w=v.reportValidity();w&&(u!==d?iziToast.warning({position:"topRight",message:"Passwords do no match"}):""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(f.text("PLEASE WAIT"),f.toggleClass("disabled"),e.ajax({url:"index.php?path=account/register/register_send_otp",type:"POST",dataType:"json",data:{firstname:a,lastname:s,email:o,telephone:i,company_name:r,company_address:n,customer_group_id:l,house_building:g,address:c,location:p,password:d,confirm:u},success:function(e){f.text("SIGN UP"),f.toggleClass("disabled"),e.status?(iziToast.success({position:"topRight",message:e.success_message}),m.hide(),h.show()):iziToast.warning({position:"topRight",title:"Oops",message:e.error_warning})}})))}),e(a).delegate("#otp-verify-button","click",function(a){a.preventDefault();const s=e("#register-first-name").val(),o=e("#register-last-name").val(),i=e("#register-email").val(),r=e("#register-phone").val(),n=e("#register-company-name").val(),l=e("#register-company-address").val(),g=e("#register-business-type").val(),c=e("#register-building-name").val(),p=e("#register-address-line").val(),d=e("#register-location").val(),u=e("#register-password").val(),m=e("#register-password-confirm").val(),h=e("#otp-value").val(),f=e("#otp-verify-button");h.length>3?(f.text("PLEASE WAIT"),f.toggleClass("disabled"),e.ajax({url:"index.php?path=account/register/register_verify_otp",type:"POST",dataType:"json",data:{firstname:s,lastname:o,email:i,telephone:r,company_name:n,company_address:l,customer_group_id:g,house_building:c,address:p,location:d,password:u,confirm:m,signup_otp:h},success:function(a){f.text("VERIFY"),f.toggleClass("disabled"),e("#otp-value").val(""),a.status?(iziToast.success({timeout:!1,position:"topRight",message:a.success_message}),setTimeout(function(){t.location=e(".base_url").attr("href")},3e3)):iziToast.warning({position:"topRight",message:"We couldn't verify your account. Please check the OTP"})}})):iziToast.error({position:"topRight",message:"Please enter a valid OTP"})}),e(a).delegate("#careers-submit-button","click",function(t){t.preventDefault();const a=e("#careers-first-name").val(),s=e("#careers-last-name").val(),o=e("#careers-designation").val(),i=e("#careers-about-yourself").val(),r=e("#careers-form")[0],n=r.reportValidity(),l=e("#careers-submit-button");n&&(""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(l.text("PLEASE WAIT"),l.toggleClass("disabled"),e.ajax({url:"index.php?path=common/home/savecareers",type:"POST",dataType:"json",data:{firstname:a,lastname:s,role:o,yourself:i},success:function(t){l.toggleClass("disabled"),t.status?(iziToast.success({position:"topRight",message:t.success_message}),e("#careers-form")[0].reset()):iziToast.warning({position:"topRight",title:"Oops",message:t.error_warning})}})))}),e(a).delegate("#partner-registration-button","click",function(t){t.preventDefault();const a=e("#partner-first-name").val(),s=e("#partner-last-name").val(),o=e("#partner-designation").val(),i=e("#partner-company-name").val(),r=e("#partner-email").val(),n=e("#partner-phone").val(),l=e("#partner-description").val(),g=e("#partner-registration-form")[0],c=g.reportValidity(),p=e("#partner-registration-button");c&&(""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(p.text("PLEASE WAIT"),p.toggleClass("disabled"),e.ajax({url:"index.php?path=common/home/savepartner",type:"POST",dataType:"json",data:{firstname:a,lastname:s,designation:o,company:i,email:r,phone:n,description:l},success:function(t){p.toggleClass("disabled"),t.status?(iziToast.success({position:"topRight",message:t.success_message}),e("#partner-registration-form")[0].reset()):iziToast.warning({position:"topRight",title:"Oops",message:t.error_warning})}})))}),e("#forgot-password-btn").click(function(t){t.preventDefault(),e("#login-view").hide(),e("#forgot-password-view").show()}),e("#password-reset-button").click(function(t){t.preventDefault();const a=e("#reset-password-email").val(),s=e("#password-reset-button");0==a.length?iziToast.warning({position:"topRight",message:"Please enter your account email"}):(s.text("PLEASE WAIT"),s.toggleClass("disabled"),e.ajax({url:"index.php?path=account/forgotten",type:"POST",dataType:"json",data:{email:a},success:function(t){s.text("RESET PASSWORD"),s.toggleClass("disabled"),e("#reset-password-email").val(""),t.status?iziToast.success({timeout:!1,position:"topRight",message:t.text_message}):iziToast.warning({position:"topRight",message:"We couldn't find an account with that email address"})}}))}),e("#farmer-register-button").click(function(t){t.preventDefault();e("#farmer-first-name").val(),e("#farmer-last-name").val(),e("#farmer-email").val(),e("#farmer-phone").val(),e("#farmer-type").val(),e("#farmer-location").val(),e("farmer-produce-grown").val(),e("#farmer-register-button");""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):e("#farmer-registration-form")[0].reportValidity()&&(iziToast.success({position:"topRight",message:"Thanks for registering. We'll get in touch"}),e("#farmer-registration-form")[0].reset())})})}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwic2Nyb2xsIiwiJG5hdiIsInRvZ2dsZUNsYXNzIiwidGhpcyIsInNjcm9sbFRvcCIsImhlaWdodCIsImNsaWNrIiwic2VjdGlvblRvIiwiYXR0ciIsImFuaW1hdGUiLCJvZmZzZXQiLCJ0b3AiLCJTY3JvbGxPdXQiLCJnc2FwIiwidG8iLCJvcGFjaXR5IiwieSIsImR1cmF0aW9uIiwiZWFzZSIsImRlbGVnYXRlIiwiZSIsInByZXZlbnREZWZhdWx0IiwibG9naW5CdXR0b24iLCJlbWFpbCIsInZhbCIsInBhc3N3b3JkIiwibGVuZ3RoIiwidGV4dCIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwiZGF0YSIsImRhdGFUeXBlIiwic3VjY2VzcyIsImpzb24iLCJjb25zb2xlIiwibG9nIiwiaGlkZSIsInNob3ciLCJhcHBlbmQiLCJpemlUb2FzdCIsImVycm9yIiwicG9zaXRpb24iLCJtZXNzYWdlIiwic2VjcmV0X2NvZGUiLCJvbmVfdGltZV9jb2RlIiwibG9jYXRpb24iLCJocmVmIiwid2FybmluZyIsImtleXVwIiwidGVzdCIsInZhbHVlIiwicmVwbGFjZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicGhvbmUiLCJjb21wYW55TmFtZSIsImNvbXBhbnlBZGRyZXNzIiwiYnVzaW5lc3NUeXBlIiwiYnVpbGRpbmdOYW1lIiwiYWRkcmVzc0xpbmUiLCJwYXNzd29yZENvbmZpcm1hdGlvbiIsInJlZ2lzdHJhdGlvblZpZXciLCJvdHBWaWV3IiwicmVnaXN0ZXJCdXR0b24iLCJyZWdpc3RlckZvcm0iLCJmb3JtSXNWYWxpZCIsInJlcG9ydFZhbGlkaXR5IiwiZ3JlY2FwdGNoYSIsImdldFJlc3BvbnNlIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJ0ZWxlcGhvbmUiLCJjb21wYW55X25hbWUiLCJjb21wYW55X2FkZHJlc3MiLCJjdXN0b21lcl9ncm91cF9pZCIsImhvdXNlX2J1aWxkaW5nIiwiYWRkcmVzcyIsImNvbmZpcm0iLCJ0aXRsZSIsIm90cCIsInZlcmlmeUJ1dHRvbiIsInNpZ251cF9vdHAiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsInJvbGUiLCJ5b3Vyc2VsZiIsInJlc2V0IiwiZGVzaWduYXRpb24iLCJjb21wYW55IiwiZGVzY3JpcHRpb24iLCJyZXNldEJ1dHRvbiIsImpRdWVyeSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Q0FBQSxTQUFBQSxFQUFBQyxFQUFBQyxFQUFBQyxHQUVBLFlBRUFILEdBQUEsV0FFQUEsRUFBQUUsR0FBQUUsT0FBQSxXQUNBLEdBQUFDLEdBQUFMLEVBQUEsYUFDQUssR0FBQUMsWUFBQSxXQUFBTixFQUFBTyxNQUFBQyxZQUFBSCxFQUFBSSxZQUlBVCxFQUFBLDRCQUFBVSxNQUFBLFdBQ0EsR0FBQUMsR0FBQVgsRUFBQU8sTUFBQUssS0FBQSxPQUNBWixHQUFBLGNBQUFhLFNBQ0FMLFVBQUFSLEVBQUFXLEdBQUFHLFNBQUFDLEtBQ0EsT0FJQUMsWUFHQUMsS0FBQUMsR0FBQSxrQkFDQUMsUUFBQSxFQUNBQyxFQUFBLEVBQ0FDLFNBQUEsR0FDQUMsS0FBQSxZQUdBTCxLQUFBQyxHQUFBLHFCQUNBRSxFQUFBLEVBQ0FDLFNBQUEsS0FJQXJCLEVBQUFFLEdBQUFxQixTQUFBLGdCQUFBLFFBQUEsU0FBQUMsR0FDQUEsRUFBQUMsZ0JBRUEsTUFBQUMsR0FBQTFCLEVBQUEsaUJBQ0EyQixFQUFBM0IsRUFBQSxnQkFBQTRCLE1BQ0FDLEVBQUE3QixFQUFBLG1CQUFBNEIsS0FDQUQsR0FBQUcsT0FBQSxHQUFBRCxFQUFBQyxPQUFBLElBQ0FKLEVBQUFLLEtBQUEsZUFDQUwsRUFBQXBCLFlBQUEsWUFDQU4sRUFBQWdDLE1BQ0FDLElBQUEsMkNBQ0FDLEtBQUEsT0FDQUMsTUFBQVIsTUFBQUEsRUFBQUUsU0FBQUEsR0FDQU8sU0FBQSxPQUNBQyxRQUFBLFNBQUFDLEdBQ0FDLFFBQUFDLElBQUFGLEdBQ0EsR0FBQUEsRUFBQSxPQUNBLE1BQUFB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M0IsRUFBQSx5QkFBQTRCLE1BQ0FtRSxFQUFBL0YsRUFBQSx5QkFDQSxJQUFBMkIsRUFBQUcsT0FDQWMsU0FBQVEsU0FDQU4sU0FBQSxXQUNBQyxRQUFBLHFDQUdBZ0QsRUFBQWhFLEtBQUEsZUFDQWdFLEVBQUF6RixZQUFBLFlBRUFOLEVBQUFnQyxNQUNBQyxJQUFBLG1DQUNBQyxLQUFBLE9BQ0FFLFNBQUEsT0FDQUQsTUFDQVIsTUFBQUEsR0FFQVUsUUFBQSxTQUFBQyxHQUNBeUQsRUFBQWhFLEtBQUEsa0JBQ0FnRSxFQUFBekYsWUFBQSxZQUNBTixFQUFBLHlCQUFBNEIsSUFBQSxJQUVBVSxFQUFBLE9BQ0FNLFNBQUFQLFNBQ0FrRCxTQUFBLEVBQ0F6QyxTQUFBLFdBQ0FDLFFBQUFULEVBQUEsZUFHQU0sU0FBQVEsU0FDQU4sU0FBQSxXQUNBQyxRQUFBLDhEQVFBL0MsRUFBQSwyQkFBQVUsTUFBQSxTQUFBYyxHQUNBQSxFQUFBQyxnQkFFQXpCLEdBQUEsc0JBQUE0QixNQUNBNUIsRUFBQSxxQkFBQTRCLE1BQ0E1QixFQUFBLGlCQUFBNEIsTUFDQTVCLEVBQUEsaUJBQUE0QixNQUNBNUIsRUFBQSxnQkFBQTRCLE1BQ0E1QixFQUFBLG9CQUFBNEIsTUFDQTVCLEVBQUEsd0JBQUE0QixNQUNBNUIsRUFBQSwwQkFDQSxLQUFBd0UsV0FBQUMsY0FDQTdCLFNBQUFRLFNBQ0FOLFNBQUEsV0FDQUMsUUFBQSw0QkFHQS9DLEVBQUEsNkJBQUEsR0FBQXVFLG1CQUNBM0IsU0FBQVAsU0FDQVMsU0FBQSxXQUNBQyxRQUFBLCtDQUdBL0MsRUFBQSw2QkFBQSxHQUFBMkYsY0F1Q0FLLE9BQUEvRixPQUFBQyIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIENoYW5nZSBuYXZiYXIgc3R5bGUgb24gc2Nyb2xsXHJcbiAgICAgICAgJChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICRuYXYgPSAkKCcuZml4ZWQtdG9wJyk7XHJcbiAgICAgICAgICAgICRuYXYudG9nZ2xlQ2xhc3MoJ3Njcm9sbGVkJywgJCh0aGlzKS5zY3JvbGxUb3AoKSA+ICRuYXYuaGVpZ2h0KCkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBOYXYgbGlua3Mgc2Nyb2xsIGFuaW1hdGlvblxyXG4gICAgICAgICQoJy5uYXYtbGluaywgLm5hdmJhci1icmFuZCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHNlY3Rpb25UbyA9ICQodGhpcykuYXR0cignaHJlZicpO1xyXG4gICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoc2VjdGlvblRvKS5vZmZzZXQoKS50b3BcclxuICAgICAgICAgICAgfSwgNzAwKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTGFuZGluZyBwYWdlIHNjcm9sbCBhbmltYXRpb25zXHJcbiAgICAgICAgU2Nyb2xsT3V0KCk7XHJcblxyXG4gICAgICAgIC8vIEhlcm8gc2VjdGlvbiBhbmltYXRpb25cclxuICAgICAgICBnc2FwLnRvKCcuYW5pbS1mcm9tLXRvcCcsIHtcclxuICAgICAgICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgZHVyYXRpb246IC41LFxyXG4gICAgICAgICAgICBlYXNlOiAnZWxhc3RpYydcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZ3NhcC50bygnLmFuaW0tZnJvbS1ib3R0b20nLCB7XHJcbiAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiAuNVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBDdXN0b21lciBMb2dpblxyXG4gICAgICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKCcjbG9naW4tYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbG9naW5CdXR0b24gPSAkKCcjbG9naW4tYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1haWwgPSAkKCcjbG9naW4tZW1haWwnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXNzd29yZCA9ICQoJyNsb2dpbi1wYXNzd29yZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbWFpbC5sZW5ndGggPiAwICYmIHBhc3N3b3JkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGxvZ2luQnV0dG9uLnRleHQoJ1BMRUFTRSBXQUlUJyk7XHJcbiAgICAgICAgICAgICAgICBsb2dpbkJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnaW5kZXgucGhwP3BhdGg9YWNjb3VudC9sb2dpbi9iZWZvcmVMb2dpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bvc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtlbWFpbDogZW1haWwsIHBhc3N3b3JkOiBwYXNzd29yZH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhqc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3N0YXR1cyddID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uWyd0d29fZmFjdG9yJ10gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjY3JlZHNcIikuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcXJjb2RlXCIpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3FyY29kZV9pbWdcIikuYXBwZW5kKFwiPGltZyBzcmM9J1wiICsganNvblsndHdvX2ZhY3RvciddWydxcl9jb2RlJ10gKyBcIicvPlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhqc29uWyd0d29fZmFjdG9yJ11bJ3FyX2NvZGUnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naW5CdXR0b24udGV4dCgnTE9HSU4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0LmVycm9yKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydlcnJvcl93YXJuaW5nJ11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naW5CdXR0b24udGV4dCgnTE9HSU4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2luQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQ3VzdG9tZXIgTG9naW5cclxuICAgICAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZSgnI3FyLWxvZ2luLWJ1dHRvbicsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxvZ2luQnV0dG9uID0gJCgnI2xvZ2luLWJ1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gJCgnI2xvZ2luLWVtYWlsJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSAkKCcjbG9naW4tcGFzc3dvcmQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNyZXRfY29kZSA9ICQoJyNzZWNyZXRfY29kZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9uZV90aW1lX2NvZGUgPSAkKCcjb25lX3RpbWVfY29kZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbWFpbC5sZW5ndGggPiAwICYmIHBhc3N3b3JkLmxlbmd0aCA+IDAgJiYgc2VjcmV0X2NvZGUubGVuZ3RoID4gMCAmJiBvbmVfdGltZV9jb2RlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGxvZ2luQnV0dG9uLnRleHQoJ1BMRUFTRSBXQUlUJyk7XHJcbiAgICAgICAgICAgICAgICBsb2dpbkJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnaW5kZXgucGhwP3BhdGg9YWNjb3VudC9sb2dpbi9sb2dpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bvc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtlbWFpbDogZW1haWwsIHBhc3N3b3JkOiBwYXNzd29yZCwgc2VjcmV0X2NvZGU6IHNlY3JldF9jb2RlLCBvbmVfdGltZV9jb2RlOiBvbmVfdGltZV9jb2RlfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uWydzdGF0dXMnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3JlZGlyZWN0J10gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0ganNvblsncmVkaXJlY3QnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoanNvblsndGVtcHBhc3N3b3JkJ10gPT0gJzEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSAkKCcuYmFzZV91cmwnKS5hdHRyKCdocmVmJykgKyAnL2NoYW5nZXBhc3MnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoJy5iYXNlX3VybCcpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSAkKCcuYmFzZV91cmwnKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC5lcnJvcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsnZXJyb3Jfd2FybmluZyddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2luQnV0dG9uLnRleHQoJ0xPR0lOJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dpbkJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBlbnRlciB5b3VyIGVtYWlsIGFuZCBwYXNzd29yZCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEN1c3RvbWVyIFJlZ2lzdHJhdGlvblxyXG5cclxuICAgICAgICAkKCcjcmVnaXN0ZXItcGhvbmUnKS5rZXl1cChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoL1xcRC9nLnRlc3QodGhpcy52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgbm9uLWRpZ2l0cyBmcm9tIGlucHV0IHZhbHVlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5yZXBsYWNlKC9cXEQvZywgJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKCcjcmVnaXN0ZXItYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZmlyc3ROYW1lID0gJCgnI3JlZ2lzdGVyLWZpcnN0LW5hbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0TmFtZSA9ICQoJyNyZWdpc3Rlci1sYXN0LW5hbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWFpbCA9ICQoJyNyZWdpc3Rlci1lbWFpbCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBob25lID0gJCgnI3JlZ2lzdGVyLXBob25lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGFueU5hbWUgPSAkKCcjcmVnaXN0ZXItY29tcGFueS1uYW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGFueUFkZHJlc3MgPSAkKCcjcmVnaXN0ZXItY29tcGFueS1hZGRyZXNzJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnVzaW5lc3NUeXBlID0gJCgnI3JlZ2lzdGVyLWJ1c2luZXNzLXR5cGUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidWlsZGluZ05hbWUgPSAkKCcjcmVnaXN0ZXItYnVpbGRpbmctbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NMaW5lID0gJCgnI3JlZ2lzdGVyLWFkZHJlc3MtbGluZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gJCgnI3JlZ2lzdGVyLWxvY2F0aW9uJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSAkKCcjcmVnaXN0ZXItcGFzc3dvcmQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXNzd29yZENvbmZpcm1hdGlvbiA9ICQoJyNyZWdpc3Rlci1wYXNzd29yZC1jb25maXJtJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uVmlldyA9ICQoJyNyZWdpc3RyYXRpb24tdmlldycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG90cFZpZXcgPSAkKCcjb3RwLXZpZXcnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RlckJ1dHRvbiA9ICQoJyNyZWdpc3Rlci1idXR0b24nKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RlckZvcm0gPSAkKCcjcmVnaXN0ZXItZm9ybScpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1Jc1ZhbGlkID0gcmVnaXN0ZXJGb3JtLnJlcG9ydFZhbGlkaXR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1Jc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFzc3dvcmRDb25maXJtYXRpb24gIT09IHBhc3N3b3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGFzc3dvcmRzIGRvIG5vIG1hdGNoJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JlY2FwdGNoYS5nZXRSZXNwb25zZSgpID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGNvbXBsZXRlIGNhcHRjaGEnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRleHQoJ1BMRUFTRSBXQUlUJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2luZGV4LnBocD9wYXRoPWFjY291bnQvcmVnaXN0ZXIvcmVnaXN0ZXJfc2VuZF9vdHAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdG5hbWU6IGZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0bmFtZTogbGFzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbGVwaG9uZTogcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiBjb21wYW55TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYW55X2FkZHJlc3M6IGNvbXBhbnlBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyX2dyb3VwX2lkOiBidXNpbmVzc1R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91c2VfYnVpbGRpbmc6IGJ1aWxkaW5nTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzTGluZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm06IHBhc3N3b3JkQ29uZmlybWF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50ZXh0KCdTSUdOIFVQJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uWydzdGF0dXMnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsnc3VjY2Vzc19tZXNzYWdlJ11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25WaWV3LmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3RwVmlldy5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydlcnJvcl93YXJuaW5nJ11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gT1RQIFZlcmlmaWNhdGlvblxyXG4gICAgICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKCcjb3RwLXZlcmlmeS1idXR0b24nLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBmaXJzdE5hbWUgPSAkKCcjcmVnaXN0ZXItZmlyc3QtbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3ROYW1lID0gJCgnI3JlZ2lzdGVyLWxhc3QtbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gJCgnI3JlZ2lzdGVyLWVtYWlsJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhvbmUgPSAkKCcjcmVnaXN0ZXItcGhvbmUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wYW55TmFtZSA9ICQoJyNyZWdpc3Rlci1jb21wYW55LW5hbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wYW55QWRkcmVzcyA9ICQoJyNyZWdpc3Rlci1jb21wYW55LWFkZHJlc3MnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXNpbmVzc1R5cGUgPSAkKCcjcmVnaXN0ZXItYnVzaW5lc3MtdHlwZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nTmFtZSA9ICQoJyNyZWdpc3Rlci1idWlsZGluZy1uYW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkcmVzc0xpbmUgPSAkKCcjcmVnaXN0ZXItYWRkcmVzcy1saW5lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSAkKCcjcmVnaXN0ZXItbG9jYXRpb24nKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXNzd29yZCA9ICQoJyNyZWdpc3Rlci1wYXNzd29yZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhc3N3b3JkQ29uZmlybWF0aW9uID0gJCgnI3JlZ2lzdGVyLXBhc3N3b3JkLWNvbmZpcm0nKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdHAgPSAkKCcjb3RwLXZhbHVlJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVyaWZ5QnV0dG9uID0gJCgnI290cC12ZXJpZnktYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG90cC5sZW5ndGggPiAzKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJpZnlCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcclxuICAgICAgICAgICAgICAgIHZlcmlmeUJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJ2luZGV4LnBocD9wYXRoPWFjY291bnQvcmVnaXN0ZXIvcmVnaXN0ZXJfdmVyaWZ5X290cCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdG5hbWU6IGZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdG5hbWU6IGxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbGVwaG9uZTogcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogY29tcGFueU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhbnlfYWRkcmVzczogY29tcGFueUFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyX2dyb3VwX2lkOiBidXNpbmVzc1R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlX2J1aWxkaW5nOiBidWlsZGluZ05hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGFkZHJlc3NMaW5lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybTogcGFzc3dvcmRDb25maXJtYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ251cF9vdHA6IG90cFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5QnV0dG9uLnRleHQoJ1ZFUklGWScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNvdHAtdmFsdWUnKS52YWwoJycpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3N0YXR1cyddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydzdWNjZXNzX21lc3NhZ2UnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJCgnLmJhc2VfdXJsJykuYXR0cignaHJlZicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdXZSBjb3VsZG5cXCd0IHZlcmlmeSB5b3VyIGFjY291bnQuIFBsZWFzZSBjaGVjayB0aGUgT1RQJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGl6aVRvYXN0LmVycm9yKHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGVudGVyIGEgdmFsaWQgT1RQJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUoJyNjYXJlZXJzLXN1Ym1pdC1idXR0b24nLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3ROYW1lID0gJCgnI2NhcmVlcnMtZmlyc3QtbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3ROYW1lID0gJCgnI2NhcmVlcnMtbGFzdC1uYW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9sZSA9ICQoJyNjYXJlZXJzLWRlc2lnbmF0aW9uJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeW91cnNlbGYgPSAkKCcjY2FyZWVycy1hYm91dC15b3Vyc2VsZicpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdGVyRm9ybSA9ICQoJyNjYXJlZXJzLWZvcm0nKVswXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtSXNWYWxpZCA9IHJlZ2lzdGVyRm9ybS5yZXBvcnRWYWxpZGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdGVyQnV0dG9uID0gJCgnI2NhcmVlcnMtc3VibWl0LWJ1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JtSXNWYWxpZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyZWNhcHRjaGEuZ2V0UmVzcG9uc2UoKSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBjb21wbGV0ZSBjYXB0Y2hhJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50ZXh0KCdQTEVBU0UgV0FJVCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2luZGV4LnBocD9wYXRoPWNvbW1vbi9ob21lL3NhdmVjYXJlZXJzJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdG5hbWU6IGZpcnN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RuYW1lOiBsYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6IHJvbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5b3Vyc2VsZjogeW91cnNlbGZcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3N0YXR1cyddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Quc3VjY2Vzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydzdWNjZXNzX21lc3NhZ2UnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjYXJlZXJzLWZvcm0nKVswXS5yZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ2Vycm9yX3dhcm5pbmcnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUoJyNwYXJ0bmVyLXJlZ2lzdHJhdGlvbi1idXR0b24nLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3ROYW1lID0gJCgnI3BhcnRuZXItZmlyc3QtbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3ROYW1lID0gJCgnI3BhcnRuZXItbGFzdC1uYW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzaWduYXRpb24gPSAkKCcjcGFydG5lci1kZXNpZ25hdGlvbicpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBhbnkgPSAkKCcjcGFydG5lci1jb21wYW55LW5hbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWFpbCA9ICQoJyNwYXJ0bmVyLWVtYWlsJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhvbmUgPSAkKCcjcGFydG5lci1waG9uZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gJCgnI3BhcnRuZXItZGVzY3JpcHRpb24nKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RlckZvcm0gPSAkKCcjcGFydG5lci1yZWdpc3RyYXRpb24tZm9ybScpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1Jc1ZhbGlkID0gcmVnaXN0ZXJGb3JtLnJlcG9ydFZhbGlkaXR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0ZXJCdXR0b24gPSAkKCcjcGFydG5lci1yZWdpc3RyYXRpb24tYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1Jc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JlY2FwdGNoYS5nZXRSZXNwb25zZSgpID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGNvbXBsZXRlIGNhcHRjaGEnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRleHQoJ1BMRUFTRSBXQUlUJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaW5kZXgucGhwP3BhdGg9Y29tbW9uL2hvbWUvc2F2ZXBhcnRuZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdG5hbWU6IGxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzaWduYXRpb246IGRlc2lnbmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFueTogY29tcGFueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiBwaG9uZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvblsnc3RhdHVzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ3N1Y2Nlc3NfbWVzc2FnZSddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3BhcnRuZXItcmVnaXN0cmF0aW9uLWZvcm0nKVswXS5yZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ2Vycm9yX3dhcm5pbmcnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnI2ZvcmdvdC1wYXNzd29yZC1idG4nKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAkKCcjbG9naW4tdmlldycpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnI2ZvcmdvdC1wYXNzd29yZC12aWV3Jykuc2hvdygpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnI3Bhc3N3b3JkLXJlc2V0LWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gJCgnI3Jlc2V0LXBhc3N3b3JkLWVtYWlsJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzZXRCdXR0b24gPSAkKCcjcGFzc3dvcmQtcmVzZXQtYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVtYWlsLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGVudGVyIHlvdXIgYWNjb3VudCBlbWFpbCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzZXRCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcclxuICAgICAgICAgICAgICAgIHJlc2V0QnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnaW5kZXgucGhwP3BhdGg9YWNjb3VudC9mb3Jnb3R0ZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldEJ1dHRvbi50ZXh0KCdSRVNFVCBQQVNTV09SRCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldEJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Jlc2V0LXBhc3N3b3JkLWVtYWlsJykudmFsKCcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uWydzdGF0dXMnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Quc3VjY2Vzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsndGV4dF9tZXNzYWdlJ11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1dlIGNvdWxkblxcJ3QgZmluZCBhbiBhY2NvdW50IHdpdGggdGhhdCBlbWFpbCBhZGRyZXNzJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcjZmFybWVyLXJlZ2lzdGVyLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0TmFtZSA9ICQoJyNmYXJtZXItZmlyc3QtbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3ROYW1lID0gJCgnI2Zhcm1lci1sYXN0LW5hbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWFpbCA9ICQoJyNmYXJtZXItZW1haWwnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG9uZSA9ICQoJyNmYXJtZXItcGhvbmUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmYXJtZXJUeXBlID0gJCgnI2Zhcm1lci10eXBlJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFybUxvY2F0aW9uID0gJCgnI2Zhcm1lci1sb2NhdGlvbicpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2R1Y2VEZXNjcmlwdGlvbiA9ICQoJ2Zhcm1lci1wcm9kdWNlLWdyb3duJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0ZXJCdXR0b24gPSAkKCcjZmFybWVyLXJlZ2lzdGVyLWJ1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChncmVjYXB0Y2hhLmdldFJlc3BvbnNlKCkgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgY29tcGxldGUgY2FwdGNoYSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoJyNmYXJtZXItcmVnaXN0cmF0aW9uLWZvcm0nKVswXS5yZXBvcnRWYWxpZGl0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Quc3VjY2Vzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhhbmtzIGZvciByZWdpc3RlcmluZy4gV2VcXCdsbCBnZXQgaW4gdG91Y2gnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoJyNmYXJtZXItcmVnaXN0cmF0aW9uLWZvcm0nKVswXS5yZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyQnV0dG9uLnRleHQoJ1BMRUFTRSBXQUlUJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICB1cmw6ICdpbmRleC5waHA/cGF0aD1hY2NvdW50L2Zhcm1lcnJlZ2lzdGVyL3JlZ2lzdGVyJyxcclxuICAgICAgICAgICAgICAgICAgICAvLyAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAvLyAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICBkYXRhOiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBuYW1lOiBmaXJzdE5hbWUgKyAnICcgKyBsYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgZW1haWw6IGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB0ZWxlcGhvbmU6IHBob25lXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmVnaXN0ZXJCdXR0b24udGV4dCgnUkVHSVNURVInKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBpZiAoanNvblsnc3RhdHVzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgbWVzc2FnZToganNvblsnc3VjY2Vzc19tZXNzYWdlJ11cclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgJCgnI2Zhcm1lci1yZWdpc3RyYXRpb24tZm9ybScpWzBdLnJlc2V0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB0aXRsZTogJ09vcHMnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgbWVzc2FnZTogJ1dlIGNvdWxkblxcJ3QgcmVnaXN0ZXIgeW91LiBQbGVhc2UgdHJ5IGFnYWluJ1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxufSkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuIl19
