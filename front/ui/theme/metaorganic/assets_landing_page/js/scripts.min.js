/*!
 * kwikbasket
 * KwikBasket Landing Page
 * 
 * @author KwikBasket
 * @version 1.0.0
 * Copyright 2020. MIT licensed.
 */
!function(e,t,s,a){"use strict";e(function(){e(s).scroll(function(){var t=e(".fixed-top");t.toggleClass("scrolled",e(this).scrollTop()>t.height())}),e(".nav-link, .navbar-brand").click(function(){var t=e(this).attr("href");e("html, body").animate({scrollTop:e(t).offset().top},700)}),ScrollOut(),gsap.to(".anim-from-top",{opacity:1,y:0,duration:.5,ease:"elastic"}),gsap.to(".anim-from-bottom",{y:0,duration:.5}),e(s).delegate("#login-button","click",function(s){s.preventDefault();const a=e("#login-button"),i=e("#login-email").val(),o=e("#login-password").val();i.length>0&&o.length>0?(a.text("PLEASE WAIT"),a.toggleClass("disabled"),e.ajax({url:"index.php?path=account/login/login",type:"post",data:{email:i,password:o},dataType:"json",success:function(s){s.status?null!=s.redirect?t.location.href=s.redirect:"1"==s.temppassword?(location=e(".base_url").attr("href")+"/changepass",console.log(e(".base_url"))):location=e(".base_url").attr("href"):(iziToast.error({position:"topRight",message:s.error_warning}),a.text("LOGIN"),a.toggleClass("disabled"))}})):iziToast.warning({position:"topRight",message:"Please enter your email and password"})}),e("#register-phone").keyup(function(e){/\D/g.test(this.value)&&(this.value=this.value.replace(/\D/g,""))}),e(s).delegate("#register-button","click",function(t){t.preventDefault();const s=e("#register-first-name").val(),a=e("#register-last-name").val(),i=e("#register-email").val(),o=e("#register-phone").val(),r=e("#register-company-name").val(),n=e("#register-company-address").val(),l=e("#register-business-type").val(),g=e("#register-building-name").val(),p=e("#register-address-line").val(),c=e("#register-location").val(),u=e("#register-password").val(),d=e("#register-password-confirm").val(),m=e("#registration-view"),f=e("#otp-view"),h=e("#register-button"),v=e("#register-form")[0],w=v.reportValidity();w&&(d!==u?iziToast.warning({position:"topRight",message:"Passwords do no match"}):""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(h.text("PLEASE WAIT"),h.toggleClass("disabled"),e.ajax({url:"index.php?path=account/register/register_send_otp",type:"POST",dataType:"json",data:{firstname:s,lastname:a,email:i,telephone:o,company_name:r,company_address:n,customer_group_id:l,house_building:g,address:p,location:c,password:u,confirm:d},success:function(e){h.text("SIGN UP"),h.toggleClass("disabled"),e.status?(iziToast.success({position:"topRight",message:e.success_message}),m.hide(),f.show()):iziToast.warning({position:"topRight",title:"Oops",message:e.error_warning})}})))}),e(s).delegate("#otp-verify-button","click",function(s){s.preventDefault();const a=e("#register-first-name").val(),i=e("#register-last-name").val(),o=e("#register-email").val(),r=e("#register-phone").val(),n=e("#register-company-name").val(),l=e("#register-company-address").val(),g=e("#register-business-type").val(),p=e("#register-building-name").val(),c=e("#register-address-line").val(),u=e("#register-location").val(),d=e("#register-password").val(),m=e("#register-password-confirm").val(),f=e("#otp-value").val(),h=e("#otp-verify-button");f.length>3?(h.text("PLEASE WAIT"),h.toggleClass("disabled"),e.ajax({url:"index.php?path=account/register/register_verify_otp",type:"POST",dataType:"json",data:{firstname:a,lastname:i,email:o,telephone:r,company_name:n,company_address:l,customer_group_id:g,house_building:p,address:c,location:u,password:d,confirm:m,signup_otp:f},success:function(s){h.text("VERIFY"),h.toggleClass("disabled"),e("#otp-value").val(""),s.status?(iziToast.success({timeout:!1,position:"topRight",message:s.success_message}),setTimeout(function(){t.location=e(".base_url").attr("href")},3e3)):iziToast.warning({position:"topRight",message:"We couldn't verify your account. Please check the OTP"})}})):iziToast.error({position:"topRight",message:"Please enter a valid OTP"})}),e("#forgot-password-btn").click(function(t){t.preventDefault(),e("#login-view").hide(),e("#forgot-password-view").show()}),e("#password-reset-button").click(function(t){t.preventDefault();const s=e("#reset-password-email").val(),a=e("#password-reset-button");0==s.length?iziToast.warning({position:"topRight",message:"Please enter your account email"}):(a.text("PLEASE WAIT"),a.toggleClass("disabled"),e.ajax({url:"index.php?path=account/forgotten",type:"POST",dataType:"json",data:{email:s},success:function(t){a.text("RESET PASSWORD"),a.toggleClass("disabled"),e("#reset-password-email").val(""),t.status?iziToast.success({timeout:!1,position:"topRight",message:t.text_message}):iziToast.warning({position:"topRight",message:"We couldn't find an account with that email address"})}}))}),e("#farmer-register-button").click(function(t){t.preventDefault();e("#farmer-first-name").val(),e("#farmer-last-name").val(),e("#farmer-email").val(),e("#farmer-phone").val(),e("#farmer-type").val(),e("#farmer-location").val(),e("farmer-produce-grown").val(),e("#farmer-register-button");""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):e("#farmer-registration-form")[0].reportValidity()&&(iziToast.success({position:"topRight",message:"Thanks for registering. We'll get in touch"}),e("#farmer-registration-form")[0].reset())})})}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwic2Nyb2xsIiwiJG5hdiIsInRvZ2dsZUNsYXNzIiwidGhpcyIsInNjcm9sbFRvcCIsImhlaWdodCIsImNsaWNrIiwic2VjdGlvblRvIiwiYXR0ciIsImFuaW1hdGUiLCJvZmZzZXQiLCJ0b3AiLCJTY3JvbGxPdXQiLCJnc2FwIiwidG8iLCJvcGFjaXR5IiwieSIsImR1cmF0aW9uIiwiZWFzZSIsImRlbGVnYXRlIiwiZSIsInByZXZlbnREZWZhdWx0IiwibG9naW5CdXR0b24iLCJlbWFpbCIsInZhbCIsInBhc3N3b3JkIiwibGVuZ3RoIiwidGV4dCIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwiZGF0YSIsImRhdGFUeXBlIiwic3VjY2VzcyIsImpzb24iLCJsb2NhdGlvbiIsImhyZWYiLCJjb25zb2xlIiwibG9nIiwiaXppVG9hc3QiLCJlcnJvciIsInBvc2l0aW9uIiwibWVzc2FnZSIsIndhcm5pbmciLCJrZXl1cCIsInRlc3QiLCJ2YWx1ZSIsInJlcGxhY2UiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBob25lIiwiY29tcGFueU5hbWUiLCJjb21wYW55QWRkcmVzcyIsImJ1c2luZXNzVHlwZSIsImJ1aWxkaW5nTmFtZSIsImFkZHJlc3NMaW5lIiwicGFzc3dvcmRDb25maXJtYXRpb24iLCJyZWdpc3RyYXRpb25WaWV3Iiwib3RwVmlldyIsInJlZ2lzdGVyQnV0dG9uIiwicmVnaXN0ZXJGb3JtIiwiZm9ybUlzVmFsaWQiLCJyZXBvcnRWYWxpZGl0eSIsImdyZWNhcHRjaGEiLCJnZXRSZXNwb25zZSIsImZpcnN0bmFtZSIsImxhc3RuYW1lIiwidGVsZXBob25lIiwiY29tcGFueV9uYW1lIiwiY29tcGFueV9hZGRyZXNzIiwiY3VzdG9tZXJfZ3JvdXBfaWQiLCJob3VzZV9idWlsZGluZyIsImFkZHJlc3MiLCJjb25maXJtIiwiaGlkZSIsInNob3ciLCJ0aXRsZSIsIm90cCIsInZlcmlmeUJ1dHRvbiIsInNpZ251cF9vdHAiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsInJlc2V0QnV0dG9uIiwicmVzZXQiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0NBQUEsU0FBQUEsRUFBQUMsRUFBQUMsRUFBQUMsR0FFQSxZQUVBSCxHQUFBLFdBRUFBLEVBQUFFLEdBQUFFLE9BQUEsV0FDQSxHQUFBQyxHQUFBTCxFQUFBLGFBQ0FLLEdBQUFDLFlBQUEsV0FBQU4sRUFBQU8sTUFBQUMsWUFBQUgsRUFBQUksWUFJQVQsRUFBQSw0QkFBQVUsTUFBQSxXQUNBLEdBQUFDLEdBQUFYLEVBQUFPLE1BQUFLLEtBQUEsT0FDQVosR0FBQSxjQUFBYSxTQUNBTCxVQUFBUixFQUFBVyxHQUFBRyxTQUFBQyxLQUNBLE9BSUFDLFlBR0FDLEtBQUFDLEdBQUEsa0JBQ0FDLFFBQUEsRUFDQUMsRUFBQSxFQUNBQyxTQUFBLEdBQ0FDLEtBQUEsWUFHQUwsS0FBQUMsR0FBQSxxQkFDQUUsRUFBQSxFQUNBQyxTQUFBLEtBSUFyQixFQUFBRSxHQUFBcUIsU0FBQSxnQkFBQSxRQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLGdCQUVBLE1BQUFDLEdBQUExQixFQUFBLGlCQUNBMkIsRUFBQTNCLEVBQUEsZ0JBQUE0QixNQUNBQyxFQUFBN0IsRUFBQSxtQkFBQTRCLEtBRUFELEdBQUFHLE9BQUEsR0FBQUQsRUFBQUMsT0FBQSxHQUNBSixFQUFBSyxLQUFBLGVBQ0FMLEVBQUFwQixZQUFBLFlBQ0FOLEVBQUFnQyxNQUNBQyxJQUFBLHFDQUNBQyxLQUFBLE9BQ0FDLE1BQUFSLE1BQUFBLEVBQUFFLFNBQUFBLEdBQ0FPLFNBQUEsT0FDQUMsUUFBQSxTQUFBQyxHQUNBQSxFQUFBLE9BQ0EsTUFBQUEsRUFBQSxTQUNBckMsRUFBQXNDLFNBQUFDLEtBQUFGLEVBQUEsU0FFQSxLQUFBQSxFQUFBLGNBQ0FDLFNBQUF2QyxFQUFBLGFBQUFZLEtBQUEsUUFBQSxjQUNBNkIsUUFBQUMsSUFBQTFDLEVBQUEsZUFHQXVD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TixTQUNBK0MsU0FBQSxFQUNBdkMsU0FBQSxXQUNBQyxRQUFBUixFQUFBLGVBR0FLLFNBQUFJLFNBQ0FGLFNBQUEsV0FDQUMsUUFBQSw4REFRQTlDLEVBQUEsMkJBQUFVLE1BQUEsU0FBQWMsR0FDQUEsRUFBQUMsZ0JBRUF6QixHQUFBLHNCQUFBNEIsTUFDQTVCLEVBQUEscUJBQUE0QixNQUNBNUIsRUFBQSxpQkFBQTRCLE1BQ0E1QixFQUFBLGlCQUFBNEIsTUFDQTVCLEVBQUEsZ0JBQUE0QixNQUNBNUIsRUFBQSxvQkFBQTRCLE1BQ0E1QixFQUFBLHdCQUFBNEIsTUFFQTVCLEVBQUEsMEJBRUEsS0FBQW1FLFdBQUFDLGNBQ0F6QixTQUFBSSxTQUNBRixTQUFBLFdBQ0FDLFFBQUEsNEJBR0E5QyxFQUFBLDZCQUFBLEdBQUFrRSxtQkFDQXZCLFNBQUFOLFNBQ0FRLFNBQUEsV0FDQUMsUUFBQSwrQ0FHQTlDLEVBQUEsNkJBQUEsR0FBQXVGLGNBdUNBQyxPQUFBdkYsT0FBQUMiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gICQoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gQ2hhbmdlIG5hdmJhciBzdHlsZSBvbiBzY3JvbGxcclxuICAgICQoZG9jdW1lbnQpLnNjcm9sbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciAkbmF2ID0gJCgnLmZpeGVkLXRvcCcpO1xyXG4gICAgICAkbmF2LnRvZ2dsZUNsYXNzKCdzY3JvbGxlZCcsICQodGhpcykuc2Nyb2xsVG9wKCkgPiAkbmF2LmhlaWdodCgpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE5hdiBsaW5rcyBzY3JvbGwgYW5pbWF0aW9uXHJcbiAgICAkKCcubmF2LWxpbmssIC5uYXZiYXItYnJhbmQnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciBzZWN0aW9uVG8gPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcclxuICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgIHNjcm9sbFRvcDogJChzZWN0aW9uVG8pLm9mZnNldCgpLnRvcFxyXG4gICAgICB9LCA3MDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gTGFuZGluZyBwYWdlIHNjcm9sbCBhbmltYXRpb25zXHJcbiAgICBTY3JvbGxPdXQoKTtcclxuXHJcbiAgICAvLyBIZXJvIHNlY3Rpb24gYW5pbWF0aW9uXHJcbiAgICBnc2FwLnRvKCcuYW5pbS1mcm9tLXRvcCcsIHtcclxuICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgeTogMCwgXHJcbiAgICAgIGR1cmF0aW9uOiAuNSxcclxuICAgICAgZWFzZTogJ2VsYXN0aWMnXHJcbiAgICB9KTtcclxuXHJcbiAgICBnc2FwLnRvKCcuYW5pbS1mcm9tLWJvdHRvbScsIHtcclxuICAgICAgeTogMCwgXHJcbiAgICAgIGR1cmF0aW9uOiAuNVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ3VzdG9tZXIgTG9naW5cclxuICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKCcjbG9naW4tYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgY29uc3QgbG9naW5CdXR0b24gPSAkKCcjbG9naW4tYnV0dG9uJyk7XHJcbiAgICAgIGNvbnN0IGVtYWlsID0gJCgnI2xvZ2luLWVtYWlsJykudmFsKCk7XHJcbiAgICAgIGNvbnN0IHBhc3N3b3JkID0gJCgnI2xvZ2luLXBhc3N3b3JkJykudmFsKCk7XHJcblxyXG4gICAgICBpZihlbWFpbC5sZW5ndGggPiAwICYmIHBhc3N3b3JkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBsb2dpbkJ1dHRvbi50ZXh0KCdQTEVBU0UgV0FJVCcpO1xyXG4gICAgICAgIGxvZ2luQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICB1cmw6ICdpbmRleC5waHA/cGF0aD1hY2NvdW50L2xvZ2luL2xvZ2luJyxcclxuICAgICAgICAgIHR5cGU6ICdwb3N0JyxcclxuICAgICAgICAgIGRhdGE6IHsgZW1haWw6IGVtYWlsLCBwYXNzd29yZDogcGFzc3dvcmQgfSxcclxuICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICBpZiAoanNvblsnc3RhdHVzJ10pIHtcclxuICAgICAgICAgICAgICBpZihqc29uWydyZWRpcmVjdCddICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBqc29uWydyZWRpcmVjdCddO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmIChqc29uWyd0ZW1wcGFzc3dvcmQnXSA9PSAnMScpIHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gJCgnLmJhc2VfdXJsJykuYXR0cignaHJlZicpICsgJy9jaGFuZ2VwYXNzJztcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoJy5iYXNlX3VybCcpKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbiA9ICQoJy5iYXNlX3VybCcpLmF0dHIoJ2hyZWYnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaXppVG9hc3QuZXJyb3Ioe1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydlcnJvcl93YXJuaW5nJ11cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBsb2dpbkJ1dHRvbi50ZXh0KCdMT0dJTicpO1xyXG4gICAgICAgICAgICAgIGxvZ2luQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XHJcbiAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgZW50ZXIgeW91ciBlbWFpbCBhbmQgcGFzc3dvcmQnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEN1c3RvbWVyIFJlZ2lzdHJhdGlvblxyXG5cclxuICAgICQoJyNyZWdpc3Rlci1waG9uZScpLmtleXVwKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgaWYgKC9cXEQvZy50ZXN0KHRoaXMudmFsdWUpKSB7XHJcbiAgICAgICAgLy8gRmlsdGVyIG91dCBub24tZGlnaXRzIGZyb20gaW5wdXQgdmFsdWVcclxuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5yZXBsYWNlKC9cXEQvZywgJycpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZSgnI3JlZ2lzdGVyLWJ1dHRvbicsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpcnN0TmFtZSA9ICQoJyNyZWdpc3Rlci1maXJzdC1uYW1lJykudmFsKCk7XHJcbiAgICAgIGNvbnN0IGxhc3ROYW1lID0gJCgnI3JlZ2lzdGVyLWxhc3QtbmFtZScpLnZhbCgpO1xyXG4gICAgICBjb25zdCBlbWFpbCA9ICQoJyNyZWdpc3Rlci1lbWFpbCcpLnZhbCgpO1xyXG4gICAgICBjb25zdCBwaG9uZSA9ICQoJyNyZWdpc3Rlci1waG9uZScpLnZhbCgpO1xyXG4gICAgICBjb25zdCBjb21wYW55TmFtZSA9ICQoJyNyZWdpc3Rlci1jb21wYW55LW5hbWUnKS52YWwoKTsgXHJcbiAgICAgIGNvbnN0IGNvbXBhbnlBZGRyZXNzID0gJCgnI3JlZ2lzdGVyLWNvbXBhbnktYWRkcmVzcycpLnZhbCgpO1xyXG4gICAgICBjb25zdCBidXNpbmVzc1R5cGUgPSAkKCcjcmVnaXN0ZXItYnVzaW5lc3MtdHlwZScpLnZhbCgpO1xyXG4gICAgICBjb25zdCBidWlsZGluZ05hbWUgPSAkKCcjcmVnaXN0ZXItYnVpbGRpbmctbmFtZScpLnZhbCgpO1xyXG4gICAgICBjb25zdCBhZGRyZXNzTGluZSA9ICQoJyNyZWdpc3Rlci1hZGRyZXNzLWxpbmUnKS52YWwoKTtcclxuICAgICAgY29uc3QgbG9jYXRpb24gPSAkKCcjcmVnaXN0ZXItbG9jYXRpb24nKS52YWwoKTtcclxuICAgICAgY29uc3QgcGFzc3dvcmQgPSAkKCcjcmVnaXN0ZXItcGFzc3dvcmQnKS52YWwoKTtcclxuICAgICAgY29uc3QgcGFzc3dvcmRDb25maXJtYXRpb24gPSAkKCcjcmVnaXN0ZXItcGFzc3dvcmQtY29uZmlybScpLnZhbCgpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVnaXN0cmF0aW9uVmlldyA9ICQoJyNyZWdpc3RyYXRpb24tdmlldycpO1xyXG4gICAgICBjb25zdCBvdHBWaWV3ID0gJCgnI290cC12aWV3Jyk7XHJcblxyXG4gICAgICBjb25zdCByZWdpc3RlckJ1dHRvbiA9ICQoJyNyZWdpc3Rlci1idXR0b24nKTtcclxuICAgICAgY29uc3QgcmVnaXN0ZXJGb3JtID0gJCgnI3JlZ2lzdGVyLWZvcm0nKVswXTtcclxuICAgICAgY29uc3QgZm9ybUlzVmFsaWQgPSByZWdpc3RlckZvcm0ucmVwb3J0VmFsaWRpdHkoKTtcclxuXHJcbiAgICAgIGlmKGZvcm1Jc1ZhbGlkKSB7XHJcbiAgICAgICAgaWYocGFzc3dvcmRDb25maXJtYXRpb24gIT09IHBhc3N3b3JkKSB7XHJcbiAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcclxuICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdQYXNzd29yZHMgZG8gbm8gbWF0Y2gnXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYoZ3JlY2FwdGNoYS5nZXRSZXNwb25zZSgpID09ICcnKSB7XHJcbiAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xyXG4gICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgY29tcGxldGUgY2FwdGNoYSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50ZXh0KCdQTEVBU0UgV0FJVCcpO1xyXG4gICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgdXJsOiAnaW5kZXgucGhwP3BhdGg9YWNjb3VudC9yZWdpc3Rlci9yZWdpc3Rlcl9zZW5kX290cCcsXHJcbiAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgZGF0YTogeyBcclxuICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogZmlyc3ROYW1lLCBcclxuICAgICAgICAgICAgICAgIGxhc3RuYW1lOiBsYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcclxuICAgICAgICAgICAgICAgIHRlbGVwaG9uZTogcGhvbmUsXHJcbiAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IGNvbXBhbnlOYW1lLFxyXG4gICAgICAgICAgICAgICAgY29tcGFueV9hZGRyZXNzOiBjb21wYW55QWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIGN1c3RvbWVyX2dyb3VwX2lkOiBidXNpbmVzc1R5cGUsXHJcbiAgICAgICAgICAgICAgICBob3VzZV9idWlsZGluZzogYnVpbGRpbmdOYW1lLFxyXG4gICAgICAgICAgICAgICAgYWRkcmVzczogYWRkcmVzc0xpbmUsXHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICBjb25maXJtOiBwYXNzd29yZENvbmZpcm1hdGlvblxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRleHQoJ1NJR04gVVAnKTtcclxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChqc29uWydzdGF0dXMnXSkge1xyXG4gICAgICAgICAgICAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydzdWNjZXNzX21lc3NhZ2UnXVxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblZpZXcuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICBvdHBWaWV3LnNob3coKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsnZXJyb3Jfd2FybmluZyddXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBPVFAgVmVyaWZpY2F0aW9uXHJcbiAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZSgnI290cC12ZXJpZnktYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgY29uc3QgZmlyc3ROYW1lID0gJCgnI3JlZ2lzdGVyLWZpcnN0LW5hbWUnKS52YWwoKTtcclxuICAgICAgY29uc3QgbGFzdE5hbWUgPSAkKCcjcmVnaXN0ZXItbGFzdC1uYW1lJykudmFsKCk7XHJcbiAgICAgIGNvbnN0IGVtYWlsID0gJCgnI3JlZ2lzdGVyLWVtYWlsJykudmFsKCk7XHJcbiAgICAgIGNvbnN0IHBob25lID0gJCgnI3JlZ2lzdGVyLXBob25lJykudmFsKCk7XHJcbiAgICAgIGNvbnN0IGNvbXBhbnlOYW1lID0gJCgnI3JlZ2lzdGVyLWNvbXBhbnktbmFtZScpLnZhbCgpOyBcclxuICAgICAgY29uc3QgY29tcGFueUFkZHJlc3MgPSAkKCcjcmVnaXN0ZXItY29tcGFueS1hZGRyZXNzJykudmFsKCk7XHJcbiAgICAgIGNvbnN0IGJ1c2luZXNzVHlwZSA9ICQoJyNyZWdpc3Rlci1idXNpbmVzcy10eXBlJykudmFsKCk7XHJcbiAgICAgIGNvbnN0IGJ1aWxkaW5nTmFtZSA9ICQoJyNyZWdpc3Rlci1idWlsZGluZy1uYW1lJykudmFsKCk7XHJcbiAgICAgIGNvbnN0IGFkZHJlc3NMaW5lID0gJCgnI3JlZ2lzdGVyLWFkZHJlc3MtbGluZScpLnZhbCgpO1xyXG4gICAgICBjb25zdCBsb2NhdGlvbiA9ICQoJyNyZWdpc3Rlci1sb2NhdGlvbicpLnZhbCgpO1xyXG4gICAgICBjb25zdCBwYXNzd29yZCA9ICQoJyNyZWdpc3Rlci1wYXNzd29yZCcpLnZhbCgpO1xyXG4gICAgICBjb25zdCBwYXNzd29yZENvbmZpcm1hdGlvbiA9ICQoJyNyZWdpc3Rlci1wYXNzd29yZC1jb25maXJtJykudmFsKCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBvdHAgPSAkKCcjb3RwLXZhbHVlJykudmFsKCk7XHJcbiAgICAgIGNvbnN0IHZlcmlmeUJ1dHRvbiA9ICQoJyNvdHAtdmVyaWZ5LWJ1dHRvbicpO1xyXG5cclxuICAgICAgaWYob3RwLmxlbmd0aCA+IDMpIHtcclxuICAgICAgICB2ZXJpZnlCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcclxuICAgICAgICB2ZXJpZnlCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICB1cmw6ICdpbmRleC5waHA/cGF0aD1hY2NvdW50L3JlZ2lzdGVyL3JlZ2lzdGVyX3ZlcmlmeV9vdHAnLFxyXG4gICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgIGZpcnN0bmFtZTogZmlyc3ROYW1lLCBcclxuICAgICAgICAgICAgbGFzdG5hbWU6IGxhc3ROYW1lLFxyXG4gICAgICAgICAgICBlbWFpbDogZW1haWwsXHJcbiAgICAgICAgICAgIHRlbGVwaG9uZTogcGhvbmUsXHJcbiAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogY29tcGFueU5hbWUsXHJcbiAgICAgICAgICAgIGNvbXBhbnlfYWRkcmVzczogY29tcGFueUFkZHJlc3MsXHJcbiAgICAgICAgICAgIGN1c3RvbWVyX2dyb3VwX2lkOiBidXNpbmVzc1R5cGUsXHJcbiAgICAgICAgICAgIGhvdXNlX2J1aWxkaW5nOiBidWlsZGluZ05hbWUsXHJcbiAgICAgICAgICAgIGFkZHJlc3M6IGFkZHJlc3NMaW5lLFxyXG4gICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCxcclxuICAgICAgICAgICAgY29uZmlybTogcGFzc3dvcmRDb25maXJtYXRpb24sXHJcbiAgICAgICAgICAgIHNpZ251cF9vdHA6IG90cFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgIHZlcmlmeUJ1dHRvbi50ZXh0KCdWRVJJRlknKTtcclxuICAgICAgICAgICAgdmVyaWZ5QnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAkKCcjb3RwLXZhbHVlJykudmFsKCcnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChqc29uWydzdGF0dXMnXSkge1xyXG4gICAgICAgICAgICAgIGl6aVRvYXN0LnN1Y2Nlc3Moe1xyXG4gICAgICAgICAgICAgICAgdGltZW91dDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ3N1Y2Nlc3NfbWVzc2FnZSddXHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAkKCcuYmFzZV91cmwnKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgICAgICAgfSwgMzAwMClcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1dlIGNvdWxkblxcJ3QgdmVyaWZ5IHlvdXIgYWNjb3VudC4gUGxlYXNlIGNoZWNrIHRoZSBPVFAnXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpemlUb2FzdC5lcnJvcih7XHJcbiAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBPVFAnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJyNmb3Jnb3QtcGFzc3dvcmQtYnRuJykuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAkKCcjbG9naW4tdmlldycpLmhpZGUoKTtcclxuICAgICAgJCgnI2ZvcmdvdC1wYXNzd29yZC12aWV3Jykuc2hvdygpO1xyXG4gICAgICBcclxuICAgIH0pO1xyXG5cclxuICAgICQoJyNwYXNzd29yZC1yZXNldC1idXR0b24nKS5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIGNvbnN0IGVtYWlsID0gJCgnI3Jlc2V0LXBhc3N3b3JkLWVtYWlsJykudmFsKCk7XHJcbiAgICAgIGNvbnN0IHJlc2V0QnV0dG9uID0gJCgnI3Bhc3N3b3JkLXJlc2V0LWJ1dHRvbicpO1xyXG5cclxuICAgICAgaWYoZW1haWwubGVuZ3RoID09IDApIHtcclxuICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcclxuICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBlbnRlciB5b3VyIGFjY291bnQgZW1haWwnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzZXRCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcclxuICAgICAgICByZXNldEJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuICBcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgdXJsOiAnaW5kZXgucGhwP3BhdGg9YWNjb3VudC9mb3Jnb3R0ZW4nLFxyXG4gICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgIHJlc2V0QnV0dG9uLnRleHQoJ1JFU0VUIFBBU1NXT1JEJyk7XHJcbiAgICAgICAgICAgIHJlc2V0QnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAkKCcjcmVzZXQtcGFzc3dvcmQtZW1haWwnKS52YWwoJycpO1xyXG4gIFxyXG4gICAgICAgICAgICBpZiAoanNvblsnc3RhdHVzJ10pIHtcclxuICAgICAgICAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWyd0ZXh0X21lc3NhZ2UnXVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnV2UgY291bGRuXFwndCBmaW5kIGFuIGFjY291bnQgd2l0aCB0aGF0IGVtYWlsIGFkZHJlc3MnXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI2Zhcm1lci1yZWdpc3Rlci1idXR0b24nKS5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpcnN0TmFtZSA9ICQoJyNmYXJtZXItZmlyc3QtbmFtZScpLnZhbCgpO1xyXG4gICAgICBjb25zdCBsYXN0TmFtZSA9ICQoJyNmYXJtZXItbGFzdC1uYW1lJykudmFsKCk7XHJcbiAgICAgIGNvbnN0IGVtYWlsID0gJCgnI2Zhcm1lci1lbWFpbCcpLnZhbCgpO1xyXG4gICAgICBjb25zdCBwaG9uZSA9ICQoJyNmYXJtZXItcGhvbmUnKS52YWwoKTtcclxuICAgICAgY29uc3QgZmFybWVyVHlwZSA9ICQoJyNmYXJtZXItdHlwZScpLnZhbCgpO1xyXG4gICAgICBjb25zdCBmYXJtTG9jYXRpb24gPSAkKCcjZmFybWVyLWxvY2F0aW9uJykudmFsKCk7XHJcbiAgICAgIGNvbnN0IHByb2R1Y2VEZXNjcmlwdGlvbiA9ICQoJ2Zhcm1lci1wcm9kdWNlLWdyb3duJykudmFsKCk7XHJcblxyXG4gICAgICBjb25zdCByZWdpc3RlckJ1dHRvbiA9ICQoJyNmYXJtZXItcmVnaXN0ZXItYnV0dG9uJyk7XHJcblxyXG4gICAgICBpZihncmVjYXB0Y2hhLmdldFJlc3BvbnNlKCkgPT0gJycpIHtcclxuICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcclxuICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBjb21wbGV0ZSBjYXB0Y2hhJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmKCQoJyNmYXJtZXItcmVnaXN0cmF0aW9uLWZvcm0nKVswXS5yZXBvcnRWYWxpZGl0eSgpKSB7XHJcbiAgICAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGFua3MgZm9yIHJlZ2lzdGVyaW5nLiBXZVxcJ2xsIGdldCBpbiB0b3VjaCdcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICQoJyNmYXJtZXItcmVnaXN0cmF0aW9uLWZvcm0nKVswXS5yZXNldCgpO1xyXG4gICAgICAgICAgLy8gcmVnaXN0ZXJCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcclxuICAgICAgICAgIC8vIHJlZ2lzdGVyQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyAkLmFqYXgoe1xyXG4gICAgICAgICAgLy8gICB1cmw6ICdpbmRleC5waHA/cGF0aD1hY2NvdW50L2Zhcm1lcnJlZ2lzdGVyL3JlZ2lzdGVyJyxcclxuICAgICAgICAgIC8vICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgLy8gICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgLy8gICBkYXRhOiB7IFxyXG4gICAgICAgICAgLy8gICAgIG5hbWU6IGZpcnN0TmFtZSArICcgJyArIGxhc3ROYW1lLFxyXG4gICAgICAgICAgLy8gICAgIGVtYWlsOiBlbWFpbCxcclxuICAgICAgICAgIC8vICAgICB0ZWxlcGhvbmU6IHBob25lXHJcbiAgICAgICAgICAvLyAgIH0sXHJcbiAgICAgICAgICAvLyAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAvLyAgICAgcmVnaXN0ZXJCdXR0b24udGV4dCgnUkVHSVNURVInKTtcclxuICAgICAgICAgIC8vICAgICByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgICAvLyAgICAgaWYgKGpzb25bJ3N0YXR1cyddKSB7XHJcbiAgICAgICAgICAvLyAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcclxuICAgICAgICAgIC8vICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXHJcbiAgICAgICAgICAvLyAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ3N1Y2Nlc3NfbWVzc2FnZSddXHJcbiAgICAgICAgICAvLyAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyAgICAgICAkKCcjZmFybWVyLXJlZ2lzdHJhdGlvbi1mb3JtJylbMF0ucmVzZXQoKTtcclxuXHJcbiAgICAgICAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xyXG4gICAgICAgICAgLy8gICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcclxuICAgICAgICAgIC8vICAgICAgICAgdGl0bGU6ICdPb3BzJyxcclxuICAgICAgICAgIC8vICAgICAgICAgbWVzc2FnZTogJ1dlIGNvdWxkblxcJ3QgcmVnaXN0ZXIgeW91LiBQbGVhc2UgdHJ5IGFnYWluJ1xyXG4gICAgICAgICAgLy8gICAgICAgfSk7XHJcbiAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgLy8gICB9XHJcbiAgICAgICAgICAvLyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxufSkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuIl19
