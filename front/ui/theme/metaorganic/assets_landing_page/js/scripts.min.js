/*!
 * kwikbasket
 * KwikBasket Landing Page
 * 
 * @author KwikBasket
 * @version 1.0.0
 * Copyright 2020. MIT licensed.
 */
!function(e,t,a,s){"use strict";e(function(){e(a).scroll(function(){var t=e(".fixed-top");t.toggleClass("scrolled",e(this).scrollTop()>t.height())}),e(".nav-link, .navbar-brand").click(function(){var t=e(this).attr("href");e("html, body").animate({scrollTop:e(t).offset().top},700)}),ScrollOut(),gsap.to(".anim-from-top",{opacity:1,y:0,duration:.5,ease:"elastic"}),gsap.to(".anim-from-bottom",{y:0,duration:.5}),e(a).delegate("#login-button","click",function(a){a.preventDefault();const s=e("#login-button"),o=e("#login-email").val(),r=e("#login-password").val();o.length>0&&r.length>0?(s.text("PLEASE WAIT"),s.toggleClass("disabled"),e.ajax({url:"index.php?path=account/login/login",type:"post",data:{email:o,password:r},dataType:"json",success:function(a){a.status?null!=a.redirect?t.location.href=a.redirect:"1"==a.temppassword?(location=e(".base_url").attr("href")+"/changepass",console.log(e(".base_url"))):location=e(".base_url").attr("href"):(iziToast.error({position:"topRight",message:a.error_warning}),s.text("LOGIN"),s.toggleClass("disabled"))}})):iziToast.warning({position:"topRight",message:"Please enter your email and password"})}),e("#register-phone").keyup(function(e){/\D/g.test(this.value)&&(this.value=this.value.replace(/\D/g,""))}),e(a).delegate("#register-button","click",function(t){t.preventDefault();const a=e("#register-first-name").val(),s=e("#register-last-name").val(),o=e("#register-email").val(),r=e("#register-phone").val(),i=e("#register-company-name").val(),n=e("#register-company-address").val(),l=e("#register-business-type").val(),c=e("#register-building-name").val(),p=e("#register-address-line").val(),g=e("#register-location").val(),m=e("#register-password").val(),d=e("#register-password-confirm").val(),u=e("#registration-view"),v=e("#otp-view"),h=e("#register-button"),f=e("#register-form")[0],b=f.reportValidity();b&&(d!==m?iziToast.warning({position:"topRight",message:"Passwords do no match"}):""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(h.text("PLEASE WAIT"),h.toggleClass("disabled"),e.ajax({url:"index.php?path=account/register/register_send_otp",type:"POST",dataType:"json",data:{firstname:a,lastname:s,email:o,telephone:r,company_name:i,company_address:n,customer_group_id:l,house_building:c,address:p,location:g,password:m,confirm:d},success:function(e){h.text("SIGN UP"),h.toggleClass("disabled"),e.status?(iziToast.success({position:"topRight",message:e.success_message}),u.hide(),v.show()):iziToast.warning({position:"topRight",title:"Oops",message:e.error_warning})}})))}),e(a).delegate("#otp-verify-button","click",function(a){a.preventDefault();const s=e("#register-first-name").val(),o=e("#register-last-name").val(),r=e("#register-email").val(),i=e("#register-phone").val(),n=e("#register-company-name").val(),l=e("#register-company-address").val(),c=e("#register-business-type").val(),p=e("#register-building-name").val(),g=e("#register-address-line").val(),m=e("#register-location").val(),d=e("#register-password").val(),u=e("#register-password-confirm").val(),v=e("#otp-value").val(),h=e("#otp-verify-button");v.length>3?(h.text("PLEASE WAIT"),h.toggleClass("disabled"),e.ajax({url:"index.php?path=account/register/register_verify_otp",type:"POST",dataType:"json",data:{firstname:s,lastname:o,email:r,telephone:i,company_name:n,company_address:l,customer_group_id:c,house_building:p,address:g,location:m,password:d,confirm:u,signup_otp:v},success:function(a){h.text("VERIFY"),h.toggleClass("disabled"),e("#otp-value").val(""),a.status?(iziToast.success({timeout:!1,position:"topRight",message:a.success_message}),setTimeout(function(){t.location=e(".base_url").attr("href")},3e3)):iziToast.warning({position:"topRight",message:"We couldn't verify your account. Please check the OTP"})}})):iziToast.error({position:"topRight",message:"Please enter a valid OTP"})}),e(a).delegate("#careers-submit-button","click",function(t){t.preventDefault();const a=e("#careers-first-name").val(),s=e("#careers-last-name").val(),o=e("#careers-designation").val(),r=e("#careers-about-yourself").val(),i=e("#careers-job-id").val(),n=e("#careers-cover-letter").val(),l=e("#careers-form")[0],c=l.reportValidity(),p=e("#careers-submit-button");c&&(""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(p.text("PLEASE WAIT"),p.toggleClass("disabled"),e.ajax({url:"index.php?path=common/home/savecareers",type:"POST",dataType:"json",data:{firstname:a,lastname:s,role:o,yourself:r,job_id:i,cover:n},success:function(t){p.toggleClass("disabled"),t.status?(iziToast.success({position:"topRight",message:t.success_message}),e("#careers-form")[0].reset(),p.text("SUBMIT")):iziToast.warning({position:"topRight",title:"Oops",message:t.error_warning})}})))}),e(a).delegate("#partner-registration-button","click",function(t){t.preventDefault();const a=e("#partner-first-name").val(),s=e("#partner-last-name").val(),o=e("#partner-designation").val(),r=e("#partner-company-name").val(),i=e("#partner-email").val(),n=e("#partner-phone").val(),l=e("#partner-description").val(),c=e("#partner-registration-form")[0],p=c.reportValidity(),g=e("#partner-registration-button");p&&(""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(g.text("PLEASE WAIT"),g.toggleClass("disabled"),e.ajax({url:"index.php?path=common/home/savepartner",type:"POST",dataType:"json",data:{firstname:a,lastname:s,designation:o,company:r,email:i,phone:n,description:l},success:function(t){g.toggleClass("disabled"),t.status?(iziToast.success({position:"topRight",message:t.success_message}),e("#partner-registration-form")[0].reset()):iziToast.warning({position:"topRight",title:"Oops",message:t.error_warning})}})))}),e("#forgot-password-btn").click(function(t){t.preventDefault(),e("#login-view").hide(),e("#forgot-password-view").show()}),e("#password-reset-button").click(function(t){t.preventDefault();const a=e("#reset-password-email").val(),s=e("#password-reset-button");0==a.length?iziToast.warning({position:"topRight",message:"Please enter your account email"}):(s.text("PLEASE WAIT"),s.toggleClass("disabled"),e.ajax({url:"index.php?path=account/forgotten",type:"POST",dataType:"json",data:{email:a},success:function(t){s.text("RESET PASSWORD"),s.toggleClass("disabled"),e("#reset-password-email").val(""),t.status?iziToast.success({timeout:!1,position:"topRight",message:t.text_message}):iziToast.warning({position:"topRight",message:"We couldn't find an account with that email address"})}}))}),e("#farmer-register-button").click(function(t){t.preventDefault();e("#farmer-first-name").val(),e("#farmer-last-name").val(),e("#farmer-email").val(),e("#farmer-phone").val(),e("#farmer-type").val(),e("#farmer-location").val(),e("farmer-produce-grown").val(),e("#farmer-register-button");""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):e("#farmer-registration-form")[0].reportValidity()&&(iziToast.success({position:"topRight",message:"Thanks for registering. We'll get in touch"}),e("#farmer-registration-form")[0].reset())}),e("#careers-job-category, #careers-job-type, #careers-job-location").change(function(){var t="index.php?path=common/home/careers",a=e("#careers-job-category").val();a&&"All Job Category"!=a&&(t+="&filter_category="+encodeURIComponent(a));var s=e("#careers-job-type").val();s&&"All Job Type"!=s&&(t+="&filter_type="+encodeURIComponent(s));var o=e("#careers-job-location").val();o&&"All Job Location"!=o&&(t+="&filter_location="+encodeURIComponent(o)),location=t})})}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwic2Nyb2xsIiwiJG5hdiIsInRvZ2dsZUNsYXNzIiwidGhpcyIsInNjcm9sbFRvcCIsImhlaWdodCIsImNsaWNrIiwic2VjdGlvblRvIiwiYXR0ciIsImFuaW1hdGUiLCJvZmZzZXQiLCJ0b3AiLCJTY3JvbGxPdXQiLCJnc2FwIiwidG8iLCJvcGFjaXR5IiwieSIsImR1cmF0aW9uIiwiZWFzZSIsImRlbGVnYXRlIiwiZSIsInByZXZlbnREZWZhdWx0IiwibG9naW5CdXR0b24iLCJlbWFpbCIsInZhbCIsInBhc3N3b3JkIiwibGVuZ3RoIiwidGV4dCIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwiZGF0YSIsImRhdGFUeXBlIiwic3VjY2VzcyIsImpzb24iLCJsb2NhdGlvbiIsImhyZWYiLCJjb25zb2xlIiwibG9nIiwiaXppVG9hc3QiLCJlcnJvciIsInBvc2l0aW9uIiwibWVzc2FnZSIsIndhcm5pbmciLCJrZXl1cCIsInRlc3QiLCJ2YWx1ZSIsInJlcGxhY2UiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBob25lIiwiY29tcGFueU5hbWUiLCJjb21wYW55QWRkcmVzcyIsImJ1c2luZXNzVHlwZSIsImJ1aWxkaW5nTmFtZSIsImFkZHJlc3NMaW5lIiwicGFzc3dvcmRDb25maXJtYXRpb24iLCJyZWdpc3RyYXRpb25WaWV3Iiwib3RwVmlldyIsInJlZ2lzdGVyQnV0dG9uIiwicmVnaXN0ZXJGb3JtIiwiZm9ybUlzVmFsaWQiLCJyZXBvcnRWYWxpZGl0eSIsImdyZWNhcHRjaGEiLCJnZXRSZXNwb25zZSIsImZpcnN0bmFtZSIsImxhc3RuYW1lIiwidGVsZXBob25lIiwiY29tcGFueV9uYW1lIiwiY29tcGFueV9hZGRyZXNzIiwiY3VzdG9tZXJfZ3JvdXBfaWQiLCJob3VzZV9idWlsZGluZyIsImFkZHJlc3MiLCJjb25maXJtIiwiaGlkZSIsInNob3ciLCJ0aXRsZSIsIm90cCIsInZlcmlmeUJ1dHRvbiIsInNpZ251cF9vdHAiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsInJvbGUiLCJ5b3Vyc2VsZiIsImpvYl9pZCIsImNvdmVyIiwicmVzZXQiLCJkZXNpZ25hdGlvbiIsImNvbXBhbnkiLCJkZXNjcmlwdGlvbiIsInJlc2V0QnV0dG9uIiwiY2hhbmdlIiwiZmlsdGVyX2NhdGVnb3J5IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZmlsdGVyX3R5cGUiLCJmaWx0ZXJfbG9jYXRpb24iLCJqUXVlcnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0NBQUEsU0FBQUEsRUFBQUMsRUFBQUMsRUFBQUMsR0FFQSxZQUVBSCxHQUFBLFdBRUFBLEVBQUFFLEdBQUFFLE9BQUEsV0FDQSxHQUFBQyxHQUFBTCxFQUFBLGFBQ0FLLEdBQUFDLFlBQUEsV0FBQU4sRUFBQU8sTUFBQUMsWUFBQUgsRUFBQUksWUFJQVQsRUFBQSw0QkFBQVUsTUFBQSxXQUNBLEdBQUFDLEdBQUFYLEVBQUFPLE1BQUFLLEtBQUEsT0FDQVosR0FBQSxjQUFBYSxTQUNBTCxVQUFBUixFQUFBVyxHQUFBRyxTQUFBQyxLQUNBLE9BSUFDLFlBR0FDLEtBQUFDLEdBQUEsa0JBQ0FDLFFBQUEsRUFDQUMsRUFBQSxFQUNBQyxTQUFBLEdBQ0FDLEtBQUEsWUFHQUwsS0FBQUMsR0FBQSxxQkFDQUUsRUFBQSxFQUNBQyxTQUFBLEtBSUFyQixFQUFBRSxHQUFBcUIsU0FBQSxnQkFBQSxRQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLGdCQUVBLE1BQUFDLEdBQUExQixFQUFBLGlCQUNBMkIsRUFBQTNCLEVBQUEsZ0JBQUE0QixNQUNBQyxFQUFBN0IsRUFBQSxtQkFBQTRCLEtBQ0FELEdBQUFHLE9BQUEsR0FBQUQsRUFBQUMsT0FBQSxHQUNBSixFQUFBSyxLQUFBLGVBQ0FMLEVBQUFwQixZQUFBLFlBQ0FOLEVBQUFnQyxNQUNBQyxJQUFBLHFDQUNBQyxLQUFBLE9BQ0FDLE1BQUFSLE1BQUFBLEVBQUFFLFNBQUFBLEdBQ0FPLFNBQUEsT0FD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LE1BQ0E1QixFQUFBLG9CQUFBNEIsTUFDQTVCLEVBQUEsd0JBQUE0QixNQUNBNUIsRUFBQSwwQkFDQSxLQUFBbUUsV0FBQUMsY0FDQXpCLFNBQUFJLFNBQ0FGLFNBQUEsV0FDQUMsUUFBQSw0QkFHQTlDLEVBQUEsNkJBQUEsR0FBQWtFLG1CQUNBdkIsU0FBQU4sU0FDQVEsU0FBQSxXQUNBQyxRQUFBLCtDQUdBOUMsRUFBQSw2QkFBQSxHQUFBMEYsV0FzQ0ExRixFQUFBLG1FQUFBK0YsT0FBQSxXQUVBLEdBQUE5RCxHQUFBLHFDQUdBK0QsRUFBQWhHLEVBQUEseUJBQUE0QixLQUVBb0UsSUFBQSxvQkFBQUEsSUFDQS9ELEdBQUEsb0JBQUFnRSxtQkFBQUQsR0FHQSxJQUFBRSxHQUFBbEcsRUFBQSxxQkFBQTRCLEtBRUFzRSxJQUFBLGdCQUFBQSxJQUNBakUsR0FBQSxnQkFBQWdFLG1CQUFBQyxHQUdBLElBQUFDLEdBQUFuRyxFQUFBLHlCQUFBNEIsS0FFQXVFLElBQUEsb0JBQUFBLElBQ0FsRSxHQUFBLG9CQUFBZ0UsbUJBQUFFLElBRUE1RCxTQUFBTixPQUtBbUUsT0FBQW5HLE9BQUFDIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgICQoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBDaGFuZ2UgbmF2YmFyIHN0eWxlIG9uIHNjcm9sbFxuICAgICAgICAkKGRvY3VtZW50KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRuYXYgPSAkKCcuZml4ZWQtdG9wJyk7XG4gICAgICAgICAgICAkbmF2LnRvZ2dsZUNsYXNzKCdzY3JvbGxlZCcsICQodGhpcykuc2Nyb2xsVG9wKCkgPiAkbmF2LmhlaWdodCgpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTmF2IGxpbmtzIHNjcm9sbCBhbmltYXRpb25cbiAgICAgICAgJCgnLm5hdi1saW5rLCAubmF2YmFyLWJyYW5kJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlY3Rpb25UbyA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogJChzZWN0aW9uVG8pLm9mZnNldCgpLnRvcFxuICAgICAgICAgICAgfSwgNzAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTGFuZGluZyBwYWdlIHNjcm9sbCBhbmltYXRpb25zXG4gICAgICAgIFNjcm9sbE91dCgpO1xuXG4gICAgICAgIC8vIEhlcm8gc2VjdGlvbiBhbmltYXRpb25cbiAgICAgICAgZ3NhcC50bygnLmFuaW0tZnJvbS10b3AnLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAuNSxcbiAgICAgICAgICAgIGVhc2U6ICdlbGFzdGljJ1xuICAgICAgICB9KTtcblxuICAgICAgICBnc2FwLnRvKCcuYW5pbS1mcm9tLWJvdHRvbScsIHtcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogLjVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ3VzdG9tZXIgTG9naW5cbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUoJyNsb2dpbi1idXR0b24nLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBjb25zdCBsb2dpbkJ1dHRvbiA9ICQoJyNsb2dpbi1idXR0b24nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1haWwgPSAkKCcjbG9naW4tZW1haWwnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSAkKCcjbG9naW4tcGFzc3dvcmQnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVtYWlsLmxlbmd0aCA+IDAgJiYgcGFzc3dvcmQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGxvZ2luQnV0dG9uLnRleHQoJ1BMRUFTRSBXQUlUJyk7XG4gICAgICAgICAgICAgICAgbG9naW5CdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnaW5kZXgucGhwP3BhdGg9YWNjb3VudC9sb2dpbi9sb2dpbicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwb3N0JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge2VtYWlsOiBlbWFpbCwgcGFzc3dvcmQ6IHBhc3N3b3JkfSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uWydzdGF0dXMnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uWydyZWRpcmVjdCddICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBqc29uWydyZWRpcmVjdCddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoanNvblsndGVtcHBhc3N3b3JkJ10gPT0gJzEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gJCgnLmJhc2VfdXJsJykuYXR0cignaHJlZicpICsgJy9jaGFuZ2VwYXNzJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJCgnLmJhc2VfdXJsJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gJCgnLmJhc2VfdXJsJykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3QuZXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsnZXJyb3Jfd2FybmluZyddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naW5CdXR0b24udGV4dCgnTE9HSU4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dpbkJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgZW50ZXIgeW91ciBlbWFpbCBhbmQgcGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEN1c3RvbWVyIFJlZ2lzdHJhdGlvblxuXG4gICAgICAgICQoJyNyZWdpc3Rlci1waG9uZScpLmtleXVwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoL1xcRC9nLnRlc3QodGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IG5vbi1kaWdpdHMgZnJvbSBpbnB1dCB2YWx1ZVxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnJlcGxhY2UoL1xcRC9nLCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKCcjcmVnaXN0ZXItYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3QgZmlyc3ROYW1lID0gJCgnI3JlZ2lzdGVyLWZpcnN0LW5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdE5hbWUgPSAkKCcjcmVnaXN0ZXItbGFzdC1uYW1lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gJCgnI3JlZ2lzdGVyLWVtYWlsJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBob25lID0gJCgnI3JlZ2lzdGVyLXBob25lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBhbnlOYW1lID0gJCgnI3JlZ2lzdGVyLWNvbXBhbnktbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wYW55QWRkcmVzcyA9ICQoJyNyZWdpc3Rlci1jb21wYW55LWFkZHJlc3MnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnVzaW5lc3NUeXBlID0gJCgnI3JlZ2lzdGVyLWJ1c2luZXNzLXR5cGUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnVpbGRpbmdOYW1lID0gJCgnI3JlZ2lzdGVyLWJ1aWxkaW5nLW5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkcmVzc0xpbmUgPSAkKCcjcmVnaXN0ZXItYWRkcmVzcy1saW5lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gJCgnI3JlZ2lzdGVyLWxvY2F0aW9uJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhc3N3b3JkID0gJCgnI3JlZ2lzdGVyLXBhc3N3b3JkJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhc3N3b3JkQ29uZmlybWF0aW9uID0gJCgnI3JlZ2lzdGVyLXBhc3N3b3JkLWNvbmZpcm0nKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uVmlldyA9ICQoJyNyZWdpc3RyYXRpb24tdmlldycpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdHBWaWV3ID0gJCgnI290cC12aWV3Jyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdGVyQnV0dG9uID0gJCgnI3JlZ2lzdGVyLWJ1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RlckZvcm0gPSAkKCcjcmVnaXN0ZXItZm9ybScpWzBdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtSXNWYWxpZCA9IHJlZ2lzdGVyRm9ybS5yZXBvcnRWYWxpZGl0eSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybUlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFzc3dvcmRDb25maXJtYXRpb24gIT09IHBhc3N3b3JkKSB7XG4gICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGFzc3dvcmRzIGRvIG5vIG1hdGNoJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JlY2FwdGNoYS5nZXRSZXNwb25zZSgpID09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGNvbXBsZXRlIGNhcHRjaGEnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRleHQoJ1BMRUFTRSBXQUlUJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdpbmRleC5waHA/cGF0aD1hY2NvdW50L3JlZ2lzdGVyL3JlZ2lzdGVyX3NlbmRfb3RwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0bmFtZTogbGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVsZXBob25lOiBwaG9uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiBjb21wYW55TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFueV9hZGRyZXNzOiBjb21wYW55QWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJfZ3JvdXBfaWQ6IGJ1c2luZXNzVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91c2VfYnVpbGRpbmc6IGJ1aWxkaW5nTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogYWRkcmVzc0xpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtOiBwYXNzd29yZENvbmZpcm1hdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udGV4dCgnU0lHTiBVUCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvblsnc3RhdHVzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0LnN1Y2Nlc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ3N1Y2Nlc3NfbWVzc2FnZSddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uVmlldy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdHBWaWV3LnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsnZXJyb3Jfd2FybmluZyddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBPVFAgVmVyaWZpY2F0aW9uXG4gICAgICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKCcjb3RwLXZlcmlmeS1idXR0b24nLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBjb25zdCBmaXJzdE5hbWUgPSAkKCcjcmVnaXN0ZXItZmlyc3QtbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0TmFtZSA9ICQoJyNyZWdpc3Rlci1sYXN0LW5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1haWwgPSAkKCcjcmVnaXN0ZXItZW1haWwnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhvbmUgPSAkKCcjcmVnaXN0ZXItcGhvbmUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGFueU5hbWUgPSAkKCcjcmVnaXN0ZXItY29tcGFueS1uYW1lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBhbnlBZGRyZXNzID0gJCgnI3JlZ2lzdGVyLWNvbXBhbnktYWRkcmVzcycpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXNpbmVzc1R5cGUgPSAkKCcjcmVnaXN0ZXItYnVzaW5lc3MtdHlwZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBidWlsZGluZ05hbWUgPSAkKCcjcmVnaXN0ZXItYnVpbGRpbmctbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRyZXNzTGluZSA9ICQoJyNyZWdpc3Rlci1hZGRyZXNzLWxpbmUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSAkKCcjcmVnaXN0ZXItbG9jYXRpb24nKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSAkKCcjcmVnaXN0ZXItcGFzc3dvcmQnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmRDb25maXJtYXRpb24gPSAkKCcjcmVnaXN0ZXItcGFzc3dvcmQtY29uZmlybScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdHAgPSAkKCcjb3RwLXZhbHVlJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcmlmeUJ1dHRvbiA9ICQoJyNvdHAtdmVyaWZ5LWJ1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3RwLmxlbmd0aCA+IDMpIHtcbiAgICAgICAgICAgICAgICB2ZXJpZnlCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcbiAgICAgICAgICAgICAgICB2ZXJpZnlCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICdpbmRleC5waHA/cGF0aD1hY2NvdW50L3JlZ2lzdGVyL3JlZ2lzdGVyX3ZlcmlmeV9vdHAnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdG5hbWU6IGxhc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVsZXBob25lOiBwaG9uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhbnlfbmFtZTogY29tcGFueU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wYW55X2FkZHJlc3M6IGNvbXBhbnlBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJfZ3JvdXBfaWQ6IGJ1c2luZXNzVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXNlX2J1aWxkaW5nOiBidWlsZGluZ05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzTGluZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm06IHBhc3N3b3JkQ29uZmlybWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbnVwX290cDogb3RwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlCdXR0b24udGV4dCgnVkVSSUZZJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjb3RwLXZhbHVlJykudmFsKCcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3N0YXR1cyddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Quc3VjY2Vzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsnc3VjY2Vzc19tZXNzYWdlJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAkKCcuYmFzZV91cmwnKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnV2UgY291bGRuXFwndCB2ZXJpZnkgeW91ciBhY2NvdW50LiBQbGVhc2UgY2hlY2sgdGhlIE9UUCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpemlUb2FzdC5lcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGVudGVyIGEgdmFsaWQgT1RQJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZSgnI2NhcmVlcnMtc3VibWl0LWJ1dHRvbicsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0TmFtZSA9ICQoJyNjYXJlZXJzLWZpcnN0LW5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdE5hbWUgPSAkKCcjY2FyZWVycy1sYXN0LW5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9sZSA9ICQoJyNjYXJlZXJzLWRlc2lnbmF0aW9uJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHlvdXJzZWxmID0gJCgnI2NhcmVlcnMtYWJvdXQteW91cnNlbGYnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgam9iX2lkID0gJCgnI2NhcmVlcnMtam9iLWlkJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdmVyID0gJCgnI2NhcmVlcnMtY292ZXItbGV0dGVyJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IGN2X3BhdGggPSAkKCcjY2FyZWVycy1jdi1wYXRoJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdGVyRm9ybSA9ICQoJyNjYXJlZXJzLWZvcm0nKVswXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybUlzVmFsaWQgPSByZWdpc3RlckZvcm0ucmVwb3J0VmFsaWRpdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0ZXJCdXR0b24gPSAkKCcjY2FyZWVycy1zdWJtaXQtYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JtSXNWYWxpZCkge1xuICAgICAgICAgICAgICAgIGlmIChncmVjYXB0Y2hhLmdldFJlc3BvbnNlKCkgPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgY29tcGxldGUgY2FwdGNoYSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdpbmRleC5waHA/cGF0aD1jb21tb24vaG9tZS9zYXZlY2FyZWVycycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RuYW1lOiBsYXN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiByb2xlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlvdXJzZWxmOiB5b3Vyc2VsZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2JfaWQ6IGpvYl9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3ZlcjogY292ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jdl9wYXRoOiBjdl9wYXRoa1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3N0YXR1cyddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0LnN1Y2Nlc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydzdWNjZXNzX21lc3NhZ2UnXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2NhcmVlcnMtZm9ybScpWzBdLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRleHQoJ1NVQk1JVCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydlcnJvcl93YXJuaW5nJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKCcjcGFydG5lci1yZWdpc3RyYXRpb24tYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3ROYW1lID0gJCgnI3BhcnRuZXItZmlyc3QtbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0TmFtZSA9ICQoJyNwYXJ0bmVyLWxhc3QtbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXNpZ25hdGlvbiA9ICQoJyNwYXJ0bmVyLWRlc2lnbmF0aW9uJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBhbnkgPSAkKCcjcGFydG5lci1jb21wYW55LW5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1haWwgPSAkKCcjcGFydG5lci1lbWFpbCcpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG9uZSA9ICQoJyNwYXJ0bmVyLXBob25lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gJCgnI3BhcnRuZXItZGVzY3JpcHRpb24nKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0ZXJGb3JtID0gJCgnI3BhcnRuZXItcmVnaXN0cmF0aW9uLWZvcm0nKVswXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybUlzVmFsaWQgPSByZWdpc3RlckZvcm0ucmVwb3J0VmFsaWRpdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0ZXJCdXR0b24gPSAkKCcjcGFydG5lci1yZWdpc3RyYXRpb24tYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JtSXNWYWxpZCkge1xuICAgICAgICAgICAgICAgIGlmIChncmVjYXB0Y2hhLmdldFJlc3BvbnNlKCkgPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgY29tcGxldGUgY2FwdGNoYSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdpbmRleC5waHA/cGF0aD1jb21tb24vaG9tZS9zYXZlcGFydG5lcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RuYW1lOiBsYXN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNpZ25hdGlvbjogZGVzaWduYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFueTogY29tcGFueSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHBob25lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3N0YXR1cyddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0LnN1Y2Nlc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydzdWNjZXNzX21lc3NhZ2UnXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3BhcnRuZXItcmVnaXN0cmF0aW9uLWZvcm0nKVswXS5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ09vcHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsnZXJyb3Jfd2FybmluZyddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKCcjZm9yZ290LXBhc3N3b3JkLWJ0bicpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICQoJyNsb2dpbi12aWV3JykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnI2ZvcmdvdC1wYXNzd29yZC12aWV3Jykuc2hvdygpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJyNwYXNzd29yZC1yZXNldC1idXR0b24nKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBjb25zdCBlbWFpbCA9ICQoJyNyZXNldC1wYXNzd29yZC1lbWFpbCcpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNldEJ1dHRvbiA9ICQoJyNwYXNzd29yZC1yZXNldC1idXR0b24nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVtYWlsLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGVudGVyIHlvdXIgYWNjb3VudCBlbWFpbCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzZXRCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcbiAgICAgICAgICAgICAgICByZXNldEJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcblxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJ2luZGV4LnBocD9wYXRoPWFjY291bnQvZm9yZ290dGVuJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0QnV0dG9uLnRleHQoJ1JFU0VUIFBBU1NXT1JEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldEJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNyZXNldC1wYXNzd29yZC1lbWFpbCcpLnZhbCgnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uWydzdGF0dXMnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0LnN1Y2Nlc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ3RleHRfbWVzc2FnZSddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1dlIGNvdWxkblxcJ3QgZmluZCBhbiBhY2NvdW50IHdpdGggdGhhdCBlbWFpbCBhZGRyZXNzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJyNmYXJtZXItcmVnaXN0ZXItYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3QgZmlyc3ROYW1lID0gJCgnI2Zhcm1lci1maXJzdC1uYW1lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3ROYW1lID0gJCgnI2Zhcm1lci1sYXN0LW5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1haWwgPSAkKCcjZmFybWVyLWVtYWlsJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBob25lID0gJCgnI2Zhcm1lci1waG9uZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmYXJtZXJUeXBlID0gJCgnI2Zhcm1lci10eXBlJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhcm1Mb2NhdGlvbiA9ICQoJyNmYXJtZXItbG9jYXRpb24nKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZHVjZURlc2NyaXB0aW9uID0gJCgnZmFybWVyLXByb2R1Y2UtZ3Jvd24nKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0ZXJCdXR0b24gPSAkKCcjZmFybWVyLXJlZ2lzdGVyLWJ1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JlY2FwdGNoYS5nZXRSZXNwb25zZSgpID09ICcnKSB7XG4gICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGNvbXBsZXRlIGNhcHRjaGEnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICgkKCcjZmFybWVyLXJlZ2lzdHJhdGlvbi1mb3JtJylbMF0ucmVwb3J0VmFsaWRpdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1RoYW5rcyBmb3IgcmVnaXN0ZXJpbmcuIFdlXFwnbGwgZ2V0IGluIHRvdWNoJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkKCcjZmFybWVyLXJlZ2lzdHJhdGlvbi1mb3JtJylbMF0ucmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXJCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICB1cmw6ICdpbmRleC5waHA/cGF0aD1hY2NvdW50L2Zhcm1lcnJlZ2lzdGVyL3JlZ2lzdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIC8vICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gICBkYXRhOiB7IFxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgbmFtZTogZmlyc3ROYW1lICsgJyAnICsgbGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB0ZWxlcGhvbmU6IHBob25lXG4gICAgICAgICAgICAgICAgICAgIC8vICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gICBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmVnaXN0ZXJCdXR0b24udGV4dCgnUkVHSVNURVInKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJlZ2lzdGVyQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBpZiAoanNvblsnc3RhdHVzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgaXppVG9hc3Quc3VjY2Vzcyh7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgbWVzc2FnZToganNvblsnc3VjY2Vzc19tZXNzYWdlJ11cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgJCgnI2Zhcm1lci1yZWdpc3RyYXRpb24tZm9ybScpWzBdLnJlc2V0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHRpdGxlOiAnT29wcycsXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgbWVzc2FnZTogJ1dlIGNvdWxkblxcJ3QgcmVnaXN0ZXIgeW91LiBQbGVhc2UgdHJ5IGFnYWluJ1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIiNjYXJlZXJzLWpvYi1jYXRlZ29yeSwgI2NhcmVlcnMtam9iLXR5cGUsICNjYXJlZXJzLWpvYi1sb2NhdGlvblwiKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgdXJsID0gJ2luZGV4LnBocD9wYXRoPWNvbW1vbi9ob21lL2NhcmVlcnMnO1xuXG5cbiAgICAgICAgICAgIHZhciBmaWx0ZXJfY2F0ZWdvcnkgPSAkKCcjY2FyZWVycy1qb2ItY2F0ZWdvcnknKS52YWwoKTtcblxuICAgICAgICAgICAgaWYgKGZpbHRlcl9jYXRlZ29yeSAmJiBmaWx0ZXJfY2F0ZWdvcnkgIT0gXCJBbGwgSm9iIENhdGVnb3J5XCIpIHtcbiAgICAgICAgICAgICAgICB1cmwgKz0gJyZmaWx0ZXJfY2F0ZWdvcnk9JyArIGVuY29kZVVSSUNvbXBvbmVudChmaWx0ZXJfY2F0ZWdvcnkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZmlsdGVyX3R5cGUgPSAkKCcjY2FyZWVycy1qb2ItdHlwZScpLnZhbCgpO1xuXG4gICAgICAgICAgICBpZiAoZmlsdGVyX3R5cGUgJiYgZmlsdGVyX3R5cGUgIT0gXCJBbGwgSm9iIFR5cGVcIikge1xuICAgICAgICAgICAgICAgIHVybCArPSAnJmZpbHRlcl90eXBlPScgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsdGVyX3R5cGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZmlsdGVyX2xvY2F0aW9uID0gJCgnI2NhcmVlcnMtam9iLWxvY2F0aW9uJykudmFsKCk7XG5cbiAgICAgICAgICAgIGlmIChmaWx0ZXJfbG9jYXRpb24gJiYgZmlsdGVyX2xvY2F0aW9uICE9IFwiQWxsIEpvYiBMb2NhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdXJsICs9ICcmZmlsdGVyX2xvY2F0aW9uPScgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsdGVyX2xvY2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvY2F0aW9uID0gdXJsO1xuXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59KShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xuIl19
