/*!
 * kwikbasket
 * KwikBasket Landing Page
 * 
 * @author KwikBasket
 * @version 1.0.0
 * Copyright 2020. MIT licensed.
 */
!function(e,t,a,s){"use strict";e(function(){e(a).scroll(function(){var t=e(".fixed-top");t.toggleClass("scrolled",e(this).scrollTop()>t.height())}),e(".nav-link, .navbar-brand").click(function(){var t=e(this).attr("href");e("html, body").animate({scrollTop:e(t).offset().top},700)}),ScrollOut(),gsap.to(".anim-from-top",{opacity:1,y:0,duration:.5,ease:"elastic"}),gsap.to(".anim-from-bottom",{y:0,duration:.5}),e(a).delegate("#login-button","click",function(a){a.preventDefault();const s=e("#login-button"),i=e("#login-email").val(),o=e("#login-password").val();i.length>0&&o.length>0?(s.text("PLEASE WAIT"),s.toggleClass("disabled"),e.ajax({url:"index.php?path=account/login/login",type:"post",data:{email:i,password:o},dataType:"json",success:function(a){a.status?null!=a.redirect?t.location.href=a.redirect:"1"==a.temppassword?(location=e(".base_url").attr("href")+"/changepass",console.log(e(".base_url"))):location=e(".base_url").attr("href"):(iziToast.error({position:"topRight",message:a.error_warning}),s.text("LOGIN"),s.toggleClass("disabled"))}})):iziToast.warning({position:"topRight",message:"Please enter your email and password"})}),e("#register-phone").keyup(function(e){/\D/g.test(this.value)&&(this.value=this.value.replace(/\D/g,""))}),e(a).delegate("#register-button","click",function(t){t.preventDefault();const a=e("#register-first-name").val(),s=e("#register-last-name").val(),i=e("#register-email").val(),o=e("#register-phone").val(),r=e("#register-company-name").val(),n=e("#register-company-address").val(),l=e("#register-business-type").val(),p=e("#register-building-name").val(),g=e("#register-address-line").val(),c=e("#register-location").val(),m=e("#register-password").val(),u=e("#register-password-confirm").val(),d=e("#registration-view"),h=e("#otp-view"),f=e("#register-button"),v=e("#register-form")[0],b=v.reportValidity();b&&(u!==m?iziToast.warning({position:"topRight",message:"Passwords do no match"}):""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(f.text("PLEASE WAIT"),f.toggleClass("disabled"),e.ajax({url:"index.php?path=account/register/register_send_otp",type:"POST",dataType:"json",data:{firstname:a,lastname:s,email:i,telephone:o,company_name:r,company_address:n,customer_group_id:l,house_building:p,address:g,location:c,password:m,confirm:u},success:function(e){f.text("SIGN UP"),f.toggleClass("disabled"),e.status?(iziToast.success({position:"topRight",message:e.success_message}),d.hide(),h.show()):iziToast.warning({position:"topRight",title:"Oops",message:e.error_warning})}})))}),e(a).delegate("#otp-verify-button","click",function(a){a.preventDefault();const s=e("#register-first-name").val(),i=e("#register-last-name").val(),o=e("#register-email").val(),r=e("#register-phone").val(),n=e("#register-company-name").val(),l=e("#register-company-address").val(),p=e("#register-business-type").val(),g=e("#register-building-name").val(),c=e("#register-address-line").val(),m=e("#register-location").val(),u=e("#register-password").val(),d=e("#register-password-confirm").val(),h=e("#otp-value").val(),f=e("#otp-verify-button");h.length>3?(f.text("PLEASE WAIT"),f.toggleClass("disabled"),e.ajax({url:"index.php?path=account/register/register_verify_otp",type:"POST",dataType:"json",data:{firstname:s,lastname:i,email:o,telephone:r,company_name:n,company_address:l,customer_group_id:p,house_building:g,address:c,location:m,password:u,confirm:d,signup_otp:h},success:function(a){f.text("VERIFY"),f.toggleClass("disabled"),e("#otp-value").val(""),a.status?(iziToast.success({timeout:!1,position:"topRight",message:a.success_message}),setTimeout(function(){t.location=e(".base_url").attr("href")},3e3)):iziToast.warning({position:"topRight",message:"We couldn't verify your account. Please check the OTP"})}})):iziToast.error({position:"topRight",message:"Please enter a valid OTP"})}),e(a).delegate("#careers-submit-button","click",function(t){t.preventDefault();const a=e("#careers-first-name").val(),s=e("#careers-last-name").val(),i=e("#careers-designation").val(),o=e("#careers-about-yourself").val(),r=e("#careers-job-id").val(),n=e("#careers-cover-letter").val(),l=e("#careers-form")[0],p=l.reportValidity(),g=e("#careers-submit-button");p&&(""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(g.text("PLEASE WAIT"),g.toggleClass("disabled"),e.ajax({url:"index.php?path=common/home/savecareers",type:"POST",dataType:"json",data:{firstname:a,lastname:s,role:i,yourself:o,job_id:r,cover:n},success:function(t){g.toggleClass("disabled"),t.status?(iziToast.success({position:"topRight",message:t.success_message}),e("#careers-form")[0].reset(),g.text("SUBMIT")):iziToast.warning({position:"topRight",title:"Oops",message:t.error_warning})}})))}),e(a).delegate("#partner-registration-button","click",function(t){t.preventDefault();const a=e("#partner-first-name").val(),s=e("#partner-last-name").val(),i=e("#partner-designation").val(),o=e("#partner-company-name").val(),r=e("#partner-email").val(),n=e("#partner-phone").val(),l=e("#partner-description").val(),p=e("#partner-registration-form")[0],g=p.reportValidity(),c=e("#partner-registration-button");g&&(""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):(c.text("PLEASE WAIT"),c.toggleClass("disabled"),e.ajax({url:"index.php?path=common/home/savepartner",type:"POST",dataType:"json",data:{firstname:a,lastname:s,designation:i,company:o,email:r,phone:n,description:l},success:function(t){c.toggleClass("disabled"),t.status?(iziToast.success({position:"topRight",message:t.success_message}),e("#partner-registration-form")[0].reset()):iziToast.warning({position:"topRight",title:"Oops",message:t.error_warning})}})))}),e("#forgot-password-btn").click(function(t){t.preventDefault(),e("#login-view").hide(),e("#forgot-password-view").show()}),e("#password-reset-button").click(function(t){t.preventDefault();const a=e("#reset-password-email").val(),s=e("#password-reset-button");0==a.length?iziToast.warning({position:"topRight",message:"Please enter your account email"}):(s.text("PLEASE WAIT"),s.toggleClass("disabled"),e.ajax({url:"index.php?path=account/forgotten",type:"POST",dataType:"json",data:{email:a},success:function(t){s.text("RESET PASSWORD"),s.toggleClass("disabled"),e("#reset-password-email").val(""),t.status?iziToast.success({timeout:!1,position:"topRight",message:t.text_message}):iziToast.warning({position:"topRight",message:"We couldn't find an account with that email address"})}}))}),e("#farmer-register-button").click(function(t){t.preventDefault();e("#farmer-first-name").val(),e("#farmer-last-name").val(),e("#farmer-email").val(),e("#farmer-phone").val(),e("#farmer-type").val(),e("#farmer-location").val(),e("farmer-produce-grown").val(),e("#farmer-register-button");""==grecaptcha.getResponse()?iziToast.warning({position:"topRight",message:"Please complete captcha"}):e("#farmer-registration-form")[0].reportValidity()&&(iziToast.success({position:"topRight",message:"Thanks for registering. We'll get in touch"}),e("#farmer-registration-form")[0].reset())})})}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwic2Nyb2xsIiwiJG5hdiIsInRvZ2dsZUNsYXNzIiwidGhpcyIsInNjcm9sbFRvcCIsImhlaWdodCIsImNsaWNrIiwic2VjdGlvblRvIiwiYXR0ciIsImFuaW1hdGUiLCJvZmZzZXQiLCJ0b3AiLCJTY3JvbGxPdXQiLCJnc2FwIiwidG8iLCJvcGFjaXR5IiwieSIsImR1cmF0aW9uIiwiZWFzZSIsImRlbGVnYXRlIiwiZSIsInByZXZlbnREZWZhdWx0IiwibG9naW5CdXR0b24iLCJlbWFpbCIsInZhbCIsInBhc3N3b3JkIiwibGVuZ3RoIiwidGV4dCIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwiZGF0YSIsImRhdGFUeXBlIiwic3VjY2VzcyIsImpzb24iLCJsb2NhdGlvbiIsImhyZWYiLCJjb25zb2xlIiwibG9nIiwiaXppVG9hc3QiLCJlcnJvciIsInBvc2l0aW9uIiwibWVzc2FnZSIsIndhcm5pbmciLCJrZXl1cCIsInRlc3QiLCJ2YWx1ZSIsInJlcGxhY2UiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBob25lIiwiY29tcGFueU5hbWUiLCJjb21wYW55QWRkcmVzcyIsImJ1c2luZXNzVHlwZSIsImJ1aWxkaW5nTmFtZSIsImFkZHJlc3NMaW5lIiwicGFzc3dvcmRDb25maXJtYXRpb24iLCJyZWdpc3RyYXRpb25WaWV3Iiwib3RwVmlldyIsInJlZ2lzdGVyQnV0dG9uIiwicmVnaXN0ZXJGb3JtIiwiZm9ybUlzVmFsaWQiLCJyZXBvcnRWYWxpZGl0eSIsImdyZWNhcHRjaGEiLCJnZXRSZXNwb25zZSIsImZpcnN0bmFtZSIsImxhc3RuYW1lIiwidGVsZXBob25lIiwiY29tcGFueV9uYW1lIiwiY29tcGFueV9hZGRyZXNzIiwiY3VzdG9tZXJfZ3JvdXBfaWQiLCJob3VzZV9idWlsZGluZyIsImFkZHJlc3MiLCJjb25maXJtIiwiaGlkZSIsInNob3ciLCJ0aXRsZSIsIm90cCIsInZlcmlmeUJ1dHRvbiIsInNpZ251cF9vdHAiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsInJvbGUiLCJ5b3Vyc2VsZiIsImpvYl9pZCIsImNvdmVyIiwicmVzZXQiLCJkZXNpZ25hdGlvbiIsImNvbXBhbnkiLCJkZXNjcmlwdGlvbiIsInJlc2V0QnV0dG9uIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7OztDQUFBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBRUEsWUFFQUgsR0FBQSxXQUVBQSxFQUFBRSxHQUFBRSxPQUFBLFdBQ0EsR0FBQUMsR0FBQUwsRUFBQSxhQUNBSyxHQUFBQyxZQUFBLFdBQUFOLEVBQUFPLE1BQUFDLFlBQUFILEVBQUFJLFlBSUFULEVBQUEsNEJBQUFVLE1BQUEsV0FDQSxHQUFBQyxHQUFBWCxFQUFBTyxNQUFBSyxLQUFBLE9BQ0FaLEdBQUEsY0FBQWEsU0FDQUwsVUFBQVIsRUFBQVcsR0FBQUcsU0FBQUMsS0FDQSxPQUlBQyxZQUdBQyxLQUFBQyxHQUFBLGtCQUNBQyxRQUFBLEVBQ0FDLEVBQUEsRUFDQUMsU0FBQSxHQUNBQyxLQUFBLFlBR0FMLEtBQUFDLEdBQUEscUJBQ0FFLEVBQUEsRUFDQUMsU0FBQSxLQUlBckIsRUFBQUUsR0FBQXFCLFNBQUEsZ0JBQUEsUUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxnQkFFQSxNQUFBQyxHQUFBMUIsRUFBQSxpQkFDQTJCLEVBQUEzQixFQUFBLGdCQUFBNEIsTUFDQUMsRUFBQTdCLEVBQUEsbUJBQUE0QixLQUNBRCxHQUFBRyxPQUFBLEdBQUFELEVBQUFDLE9BQUEsR0FDQUosRUFBQUssS0FBQSxlQUNBTCxFQUFBcEIsWUFBQSxZQUNBTixFQUFBZ0MsTUFDQUMsSUFBQSxxQ0FDQUMsS0FBQSxPQUNBQyxNQUFBUixNQUFBQSxFQUFBRSxTQUFBQSxHQUNBTyxTQUFBLE9BQ0FDLFFBQUEsU0FBQUMsR0FDQUEsRUFBQSxPQUNBLE1BQUFBLEVBQUEsU0FDQXJDLEVBQUFzQyxTQUFBQyxLQUFBRixFQUFBLFNBQ0EsS0FB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QUFBSSxTQUNBRixTQUFBLFdBQ0FDLFFBQUEsNEJBR0E5QyxFQUFBLDZCQUFBLEdBQUFrRSxtQkFDQXZCLFNBQUFOLFNBQ0FRLFNBQUEsV0FDQUMsUUFBQSwrQ0FHQTlDLEVBQUEsNkJBQUEsR0FBQTBGLGNBdUNBSyxPQUFBOUYsT0FBQUMiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgJChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIENoYW5nZSBuYXZiYXIgc3R5bGUgb24gc2Nyb2xsXG4gICAgICAgICQoZG9jdW1lbnQpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJG5hdiA9ICQoJy5maXhlZC10b3AnKTtcbiAgICAgICAgICAgICRuYXYudG9nZ2xlQ2xhc3MoJ3Njcm9sbGVkJywgJCh0aGlzKS5zY3JvbGxUb3AoKSA+ICRuYXYuaGVpZ2h0KCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBOYXYgbGlua3Mgc2Nyb2xsIGFuaW1hdGlvblxuICAgICAgICAkKCcubmF2LWxpbmssIC5uYXZiYXItYnJhbmQnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VjdGlvblRvID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKHNlY3Rpb25Ubykub2Zmc2V0KCkudG9wXG4gICAgICAgICAgICB9LCA3MDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBMYW5kaW5nIHBhZ2Ugc2Nyb2xsIGFuaW1hdGlvbnNcbiAgICAgICAgU2Nyb2xsT3V0KCk7XG5cbiAgICAgICAgLy8gSGVybyBzZWN0aW9uIGFuaW1hdGlvblxuICAgICAgICBnc2FwLnRvKCcuYW5pbS1mcm9tLXRvcCcsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZHVyYXRpb246IC41LFxuICAgICAgICAgICAgZWFzZTogJ2VsYXN0aWMnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGdzYXAudG8oJy5hbmltLWZyb20tYm90dG9tJywge1xuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAuNVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDdXN0b21lciBMb2dpblxuICAgICAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZSgnI2xvZ2luLWJ1dHRvbicsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGxvZ2luQnV0dG9uID0gJCgnI2xvZ2luLWJ1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWFpbCA9ICQoJyNsb2dpbi1lbWFpbCcpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXNzd29yZCA9ICQoJyNsb2dpbi1wYXNzd29yZCcpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW1haWwubGVuZ3RoID4gMCAmJiBwYXNzd29yZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbG9naW5CdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcbiAgICAgICAgICAgICAgICBsb2dpbkJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICdpbmRleC5waHA/cGF0aD1hY2NvdW50L2xvZ2luL2xvZ2luJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bvc3QnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7ZW1haWw6IGVtYWlsLCBwYXNzd29yZDogcGFzc3dvcmR9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3N0YXR1cyddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3JlZGlyZWN0J10gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGpzb25bJ3JlZGlyZWN0J107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChqc29uWyd0ZW1wcGFzc3dvcmQnXSA9PSAnMScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSAkKCcuYmFzZV91cmwnKS5hdHRyKCdocmVmJykgKyAnL2NoYW5nZXBhc3MnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkKCcuYmFzZV91cmwnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSAkKCcuYmFzZV91cmwnKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC5lcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydlcnJvcl93YXJuaW5nJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dpbkJ1dHRvbi50ZXh0KCdMT0dJTicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2luQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBlbnRlciB5b3VyIGVtYWlsIGFuZCBwYXNzd29yZCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ3VzdG9tZXIgUmVnaXN0cmF0aW9uXG5cbiAgICAgICAgJCgnI3JlZ2lzdGVyLXBob25lJykua2V5dXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICgvXFxEL2cudGVzdCh0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgbm9uLWRpZ2l0cyBmcm9tIGlucHV0IHZhbHVlXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUucmVwbGFjZSgvXFxEL2csICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUoJyNyZWdpc3Rlci1idXR0b24nLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBjb25zdCBmaXJzdE5hbWUgPSAkKCcjcmVnaXN0ZXItZmlyc3QtbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0TmFtZSA9ICQoJyNyZWdpc3Rlci1sYXN0LW5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1haWwgPSAkKCcjcmVnaXN0ZXItZW1haWwnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhvbmUgPSAkKCcjcmVnaXN0ZXItcGhvbmUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGFueU5hbWUgPSAkKCcjcmVnaXN0ZXItY29tcGFueS1uYW1lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBhbnlBZGRyZXNzID0gJCgnI3JlZ2lzdGVyLWNvbXBhbnktYWRkcmVzcycpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXNpbmVzc1R5cGUgPSAkKCcjcmVnaXN0ZXItYnVzaW5lc3MtdHlwZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBidWlsZGluZ05hbWUgPSAkKCcjcmVnaXN0ZXItYnVpbGRpbmctbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRyZXNzTGluZSA9ICQoJyNyZWdpc3Rlci1hZGRyZXNzLWxpbmUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSAkKCcjcmVnaXN0ZXItbG9jYXRpb24nKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSAkKCcjcmVnaXN0ZXItcGFzc3dvcmQnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmRDb25maXJtYXRpb24gPSAkKCcjcmVnaXN0ZXItcGFzc3dvcmQtY29uZmlybScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RyYXRpb25WaWV3ID0gJCgnI3JlZ2lzdHJhdGlvbi12aWV3Jyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG90cFZpZXcgPSAkKCcjb3RwLXZpZXcnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0ZXJCdXR0b24gPSAkKCcjcmVnaXN0ZXItYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdGVyRm9ybSA9ICQoJyNyZWdpc3Rlci1mb3JtJylbMF07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1Jc1ZhbGlkID0gcmVnaXN0ZXJGb3JtLnJlcG9ydFZhbGlkaXR5KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JtSXNWYWxpZCkge1xuICAgICAgICAgICAgICAgIGlmIChwYXNzd29yZENvbmZpcm1hdGlvbiAhPT0gcGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQYXNzd29yZHMgZG8gbm8gbWF0Y2gnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChncmVjYXB0Y2hhLmdldFJlc3BvbnNlKCkgPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0Lndhcm5pbmcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgY29tcGxldGUgY2FwdGNoYSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udGV4dCgnUExFQVNFIFdBSVQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2luZGV4LnBocD9wYXRoPWFjY291bnQvcmVnaXN0ZXIvcmVnaXN0ZXJfc2VuZF9vdHAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RuYW1lOiBmaXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RuYW1lOiBsYXN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZWxlcGhvbmU6IHBob25lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IGNvbXBhbnlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYW55X2FkZHJlc3M6IGNvbXBhbnlBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lcl9ncm91cF9pZDogYnVzaW5lc3NUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VzZV9idWlsZGluZzogYnVpbGRpbmdOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzTGluZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm06IHBhc3N3b3JkQ29uZmlybWF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50ZXh0KCdTSUdOIFVQJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uWydzdGF0dXMnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Quc3VjY2Vzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsnc3VjY2Vzc19tZXNzYWdlJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25WaWV3LmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG90cFZpZXcuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydlcnJvcl93YXJuaW5nJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE9UUCBWZXJpZmljYXRpb25cbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUoJyNvdHAtdmVyaWZ5LWJ1dHRvbicsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGZpcnN0TmFtZSA9ICQoJyNyZWdpc3Rlci1maXJzdC1uYW1lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3ROYW1lID0gJCgnI3JlZ2lzdGVyLWxhc3QtbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWFpbCA9ICQoJyNyZWdpc3Rlci1lbWFpbCcpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG9uZSA9ICQoJyNyZWdpc3Rlci1waG9uZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wYW55TmFtZSA9ICQoJyNyZWdpc3Rlci1jb21wYW55LW5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGFueUFkZHJlc3MgPSAkKCcjcmVnaXN0ZXItY29tcGFueS1hZGRyZXNzJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1c2luZXNzVHlwZSA9ICQoJyNyZWdpc3Rlci1idXNpbmVzcy10eXBlJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nTmFtZSA9ICQoJyNyZWdpc3Rlci1idWlsZGluZy1uYW1lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NMaW5lID0gJCgnI3JlZ2lzdGVyLWFkZHJlc3MtbGluZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9ICQoJyNyZWdpc3Rlci1sb2NhdGlvbicpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXNzd29yZCA9ICQoJyNyZWdpc3Rlci1wYXNzd29yZCcpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXNzd29yZENvbmZpcm1hdGlvbiA9ICQoJyNyZWdpc3Rlci1wYXNzd29yZC1jb25maXJtJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG90cCA9ICQoJyNvdHAtdmFsdWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVyaWZ5QnV0dG9uID0gJCgnI290cC12ZXJpZnktYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdHAubGVuZ3RoID4gMykge1xuICAgICAgICAgICAgICAgIHZlcmlmeUJ1dHRvbi50ZXh0KCdQTEVBU0UgV0FJVCcpO1xuICAgICAgICAgICAgICAgIHZlcmlmeUJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcblxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJ2luZGV4LnBocD9wYXRoPWFjY291bnQvcmVnaXN0ZXIvcmVnaXN0ZXJfdmVyaWZ5X290cCcsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RuYW1lOiBmaXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0bmFtZTogbGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWxlcGhvbmU6IHBob25lLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFueV9uYW1lOiBjb21wYW55TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhbnlfYWRkcmVzczogY29tcGFueUFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lcl9ncm91cF9pZDogYnVzaW5lc3NUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaG91c2VfYnVpbGRpbmc6IGJ1aWxkaW5nTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGFkZHJlc3NMaW5lLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybTogcGFzc3dvcmRDb25maXJtYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWdudXBfb3RwOiBvdHBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeUJ1dHRvbi50ZXh0KCdWRVJJRlknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeUJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNvdHAtdmFsdWUnKS52YWwoJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvblsnc3RhdHVzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydzdWNjZXNzX21lc3NhZ2UnXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICQoJy5iYXNlX3VybCcpLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdXZSBjb3VsZG5cXCd0IHZlcmlmeSB5b3VyIGFjY291bnQuIFBsZWFzZSBjaGVjayB0aGUgT1RQJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGl6aVRvYXN0LmVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBPVFAnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKCcjY2FyZWVycy1zdWJtaXQtYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3ROYW1lID0gJCgnI2NhcmVlcnMtZmlyc3QtbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0TmFtZSA9ICQoJyNjYXJlZXJzLWxhc3QtbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByb2xlID0gJCgnI2NhcmVlcnMtZGVzaWduYXRpb24nKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeW91cnNlbGYgPSAkKCcjY2FyZWVycy1hYm91dC15b3Vyc2VsZicpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2JfaWQgPSAkKCcjY2FyZWVycy1qb2ItaWQnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY292ZXIgPSAkKCcjY2FyZWVycy1jb3Zlci1sZXR0ZXInKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgY3ZfcGF0aCA9ICQoJyNjYXJlZXJzLWN2LXBhdGgnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0ZXJGb3JtID0gJCgnI2NhcmVlcnMtZm9ybScpWzBdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtSXNWYWxpZCA9IHJlZ2lzdGVyRm9ybS5yZXBvcnRWYWxpZGl0eSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RlckJ1dHRvbiA9ICQoJyNjYXJlZXJzLXN1Ym1pdC1idXR0b24nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1Jc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyZWNhcHRjaGEuZ2V0UmVzcG9uc2UoKSA9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBjb21wbGV0ZSBjYXB0Y2hhJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50ZXh0KCdQTEVBU0UgV0FJVCcpO1xuICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2luZGV4LnBocD9wYXRoPWNvbW1vbi9ob21lL3NhdmVjYXJlZXJzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RuYW1lOiBmaXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdG5hbWU6IGxhc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6IHJvbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeW91cnNlbGY6IHlvdXJzZWxmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvYl9pZDogam9iX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyOiBjb3ZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2N2X3BhdGg6IGN2X3BhdGhrXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvblsnc3RhdHVzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Quc3VjY2Vzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ3N1Y2Nlc3NfbWVzc2FnZSddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjY2FyZWVycy1mb3JtJylbMF0ucmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24udGV4dCgnU1VCTUlUJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ2Vycm9yX3dhcm5pbmcnXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkuZGVsZWdhdGUoJyNwYXJ0bmVyLXJlZ2lzdHJhdGlvbi1idXR0b24nLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdE5hbWUgPSAkKCcjcGFydG5lci1maXJzdC1uYW1lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3ROYW1lID0gJCgnI3BhcnRuZXItbGFzdC1uYW1lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2lnbmF0aW9uID0gJCgnI3BhcnRuZXItZGVzaWduYXRpb24nKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGFueSA9ICQoJyNwYXJ0bmVyLWNvbXBhbnktbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWFpbCA9ICQoJyNwYXJ0bmVyLWVtYWlsJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBob25lID0gJCgnI3BhcnRuZXItcGhvbmUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSAkKCcjcGFydG5lci1kZXNjcmlwdGlvbicpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RlckZvcm0gPSAkKCcjcGFydG5lci1yZWdpc3RyYXRpb24tZm9ybScpWzBdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtSXNWYWxpZCA9IHJlZ2lzdGVyRm9ybS5yZXBvcnRWYWxpZGl0eSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RlckJ1dHRvbiA9ICQoJyNwYXJ0bmVyLXJlZ2lzdHJhdGlvbi1idXR0b24nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1Jc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyZWNhcHRjaGEuZ2V0UmVzcG9uc2UoKSA9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBjb21wbGV0ZSBjYXB0Y2hhJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50ZXh0KCdQTEVBU0UgV0FJVCcpO1xuICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2luZGV4LnBocD9wYXRoPWNvbW1vbi9ob21lL3NhdmVwYXJ0bmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RuYW1lOiBmaXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdG5hbWU6IGxhc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2lnbmF0aW9uOiBkZXNpZ25hdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYW55OiBjb21wYW55LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogcGhvbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvblsnc3RhdHVzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Quc3VjY2Vzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGpzb25bJ3N1Y2Nlc3NfbWVzc2FnZSddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjcGFydG5lci1yZWdpc3RyYXRpb24tZm9ybScpWzBdLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBqc29uWydlcnJvcl93YXJuaW5nJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJyNmb3Jnb3QtcGFzc3dvcmQtYnRuJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgJCgnI2xvZ2luLXZpZXcnKS5oaWRlKCk7XG4gICAgICAgICAgICAkKCcjZm9yZ290LXBhc3N3b3JkLXZpZXcnKS5zaG93KCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnI3Bhc3N3b3JkLXJlc2V0LWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gJCgnI3Jlc2V0LXBhc3N3b3JkLWVtYWlsJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc2V0QnV0dG9uID0gJCgnI3Bhc3N3b3JkLXJlc2V0LWJ1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW1haWwubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgZW50ZXIgeW91ciBhY2NvdW50IGVtYWlsJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNldEJ1dHRvbi50ZXh0KCdQTEVBU0UgV0FJVCcpO1xuICAgICAgICAgICAgICAgIHJlc2V0QnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xuXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnaW5kZXgucGhwP3BhdGg9YWNjb3VudC9mb3Jnb3R0ZW4nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoanNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRCdXR0b24udGV4dCgnUkVTRVQgUEFTU1dPUkQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0QnV0dG9uLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Jlc2V0LXBhc3N3b3JkLWVtYWlsJykudmFsKCcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bJ3N0YXR1cyddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Quc3VjY2Vzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToganNvblsndGV4dF9tZXNzYWdlJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXppVG9hc3Qud2FybmluZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnV2UgY291bGRuXFwndCBmaW5kIGFuIGFjY291bnQgd2l0aCB0aGF0IGVtYWlsIGFkZHJlc3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnI2Zhcm1lci1yZWdpc3Rlci1idXR0b24nKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBjb25zdCBmaXJzdE5hbWUgPSAkKCcjZmFybWVyLWZpcnN0LW5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdE5hbWUgPSAkKCcjZmFybWVyLWxhc3QtbmFtZScpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWFpbCA9ICQoJyNmYXJtZXItZW1haWwnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhvbmUgPSAkKCcjZmFybWVyLXBob25lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhcm1lclR5cGUgPSAkKCcjZmFybWVyLXR5cGUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFybUxvY2F0aW9uID0gJCgnI2Zhcm1lci1sb2NhdGlvbicpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9kdWNlRGVzY3JpcHRpb24gPSAkKCdmYXJtZXItcHJvZHVjZS1ncm93bicpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RlckJ1dHRvbiA9ICQoJyNmYXJtZXItcmVnaXN0ZXItYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChncmVjYXB0Y2hhLmdldFJlc3BvbnNlKCkgPT0gJycpIHtcbiAgICAgICAgICAgICAgICBpemlUb2FzdC53YXJuaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgY29tcGxldGUgY2FwdGNoYSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCQoJyNmYXJtZXItcmVnaXN0cmF0aW9uLWZvcm0nKVswXS5yZXBvcnRWYWxpZGl0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGl6aVRvYXN0LnN1Y2Nlc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhhbmtzIGZvciByZWdpc3RlcmluZy4gV2VcXCdsbCBnZXQgaW4gdG91Y2gnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICQoJyNmYXJtZXItcmVnaXN0cmF0aW9uLWZvcm0nKVswXS5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlckJ1dHRvbi50ZXh0KCdQTEVBU0UgV0FJVCcpO1xuICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlckJ1dHRvbi50b2dnbGVDbGFzcygnZGlzYWJsZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAvLyAgIHVybDogJ2luZGV4LnBocD9wYXRoPWFjY291bnQvZmFybWVycmVnaXN0ZXIvcmVnaXN0ZXInLFxuICAgICAgICAgICAgICAgICAgICAvLyAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAvLyAgIGRhdGE6IHsgXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBuYW1lOiBmaXJzdE5hbWUgKyAnICcgKyBsYXN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRlbGVwaG9uZTogcGhvbmVcbiAgICAgICAgICAgICAgICAgICAgLy8gICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICByZWdpc3RlckJ1dHRvbi50ZXh0KCdSRUdJU1RFUicpO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmVnaXN0ZXJCdXR0b24udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmIChqc29uWydzdGF0dXMnXSkge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBpemlUb2FzdC5zdWNjZXNzKHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBwb3NpdGlvbjogJ3RvcFJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBtZXNzYWdlOiBqc29uWydzdWNjZXNzX21lc3NhZ2UnXVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAkKCcjZmFybWVyLXJlZ2lzdHJhdGlvbi1mb3JtJylbMF0ucmVzZXQoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgaXppVG9hc3Qud2FybmluZyh7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgcG9zaXRpb246ICd0b3BSaWdodCcsXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgdGl0bGU6ICdPb3BzJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBtZXNzYWdlOiAnV2UgY291bGRuXFwndCByZWdpc3RlciB5b3UuIFBsZWFzZSB0cnkgYWdhaW4nXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxufSkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcbiJdfQ==
